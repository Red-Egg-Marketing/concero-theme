{"version":3,"sources":["@wordpress/components/src/popover/index.js"],"names":["classnames","useRef","useState","useEffect","useLayoutEffect","focus","getRectangleFromRange","ESCAPE","deprecated","useViewportMatch","useResizeObserver","close","computePopoverPosition","withFocusReturn","withConstrainedTabbing","PopoverDetectOutside","Button","ScrollLock","IsolatedEventContainer","Slot","Fill","useSlot","Animate","FocusManaged","children","SLOT_NAME","computeAnchorRect","anchorRefFallback","anchorRect","getAnchorRect","anchorRef","shouldAnchorIncludePadding","current","window","Range","Element","rect","getBoundingClientRect","withoutPadding","top","bottom","topRect","bottomRect","DOMRect","left","width","parentNode","element","getComputedStyle","paddingTop","paddingBottom","paddingLeft","paddingRight","parseInt","right","x","y","height","useFocusContentOnMount","focusOnMount","contentRef","focusTimeout","setTimeout","firstTabbable","tabbable","find","clearTimeout","setAttribute","name","value","hasAttribute","removeAttribute","getAttribute","setStyle","property","style","setClass","toggle","classList","contains","add","remove","Popover","headerTitle","onClose","onKeyDown","className","noArrow","isAlternate","position","range","expandOnMobile","animate","onClickOutside","onFocusOutside","__unstableSticky","__unstableSlotName","__unstableAllowVerticalSubpixelPosition","__unstableAllowHorizontalSubpixelPosition","__unstableFixedPosition","__unstableBoundaryParent","contentProps","containerRef","isMobileViewport","animateOrigin","setAnimateOrigin","slot","isExpanded","containerResizeListener","contentSize","refresh","subpixels","anchor","relativeOffsetTop","offsetParent","offsetParentRect","boundaryElement","closest","usedContentSize","popoverTop","popoverLeft","xAxis","yAxis","contentHeight","contentWidth","yAxisMapping","xAxisMapping","animateYAxis","animateXAxis","timeoutId","intervalHandle","setInterval","rafId","refreshOnAnimationFrame","cancelAnimationFrame","requestAnimationFrame","addEventListener","observer","observeElement","MutationObserver","observe","attributes","clearInterval","removeEventListener","disconnect","maybeClose","event","keyCode","stopPropagation","handleOnFocusOutside","clickEvent","MouseEvent","error","document","createEvent","initMouseEvent","Object","defineProperty","get","relatedTarget","alternative","content","origin","animateClassName","ref","PopoverContainer"],"mappings":";;;;;AAAA;;;AAGA,OAAOA,UAAP,MAAuB,YAAvB;AAEA;;;;AAGA,SACCC,MADD,EAECC,QAFD,EAGCC,SAHD,EAICC,eAJD,QAKO,oBALP;AAMA,SAASC,KAAT,EAAgBC,qBAAhB,QAA6C,gBAA7C;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,SAASC,gBAAT,EAA2BC,iBAA3B,QAAoD,oBAApD;AACA,SAASC,KAAT,QAAsB,kBAAtB;AAEA;;;;AAGA,SAASC,sBAAT,QAAuC,SAAvC;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,sBAAP,MAAmC,0CAAnC;AACA,OAAOC,oBAAP,MAAiC,kBAAjC;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,UAAP,MAAuB,gBAAvB;AACA,OAAOC,sBAAP,MAAmC,6BAAnC;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,OAArB,QAAoC,cAApC;AACA,OAAOC,OAAP,MAAoB,YAApB;AAEA,IAAMC,YAAY,GAAGT,sBAAsB,CAC1CD,eAAe,CAAE;AAAA,MAAIW,QAAJ,QAAIA,QAAJ;AAAA,SAAoBA,QAApB;AAAA,CAAF,CAD2B,CAA3C;AAIA;;;;;;AAKA,IAAMC,SAAS,GAAG,SAAlB;;AAEA,SAASC,iBAAT,CACCC,iBADD,EAECC,UAFD,EAGCC,aAHD,EAME;AAAA,MAFDC,SAEC,uEAFW,KAEX;AAAA,MADDC,0BACC;;AACD,MAAKH,UAAL,EAAkB;AACjB,WAAOA,UAAP;AACA;;AAED,MAAKC,aAAL,EAAqB;AACpB,QAAK,CAAEF,iBAAiB,CAACK,OAAzB,EAAmC;AAClC;AACA;;AAED,WAAOH,aAAa,CAAEF,iBAAiB,CAACK,OAApB,CAApB;AACA;;AAED,MAAKF,SAAS,KAAK,KAAnB,EAA2B;AAC1B,QAAK,CAAEA,SAAP,EAAmB;AAClB;AACA;;AAED,QAAKA,SAAS,YAAYG,MAAM,CAACC,KAAjC,EAAyC;AACxC,aAAO5B,qBAAqB,CAAEwB,SAAF,CAA5B;AACA;;AAED,QAAKA,SAAS,YAAYG,MAAM,CAACE,OAAjC,EAA2C;AAC1C,UAAMC,MAAI,GAAGN,SAAS,CAACO,qBAAV,EAAb;;AAEA,UAAKN,0BAAL,EAAkC;AACjC,eAAOK,MAAP;AACA;;AAED,aAAOE,cAAc,CAAEF,MAAF,EAAQN,SAAR,CAArB;AACA;;AAjByB,QAmBlBS,GAnBkB,GAmBFT,SAnBE,CAmBlBS,GAnBkB;AAAA,QAmBbC,MAnBa,GAmBFV,SAnBE,CAmBbU,MAnBa;AAoB1B,QAAMC,OAAO,GAAGF,GAAG,CAACF,qBAAJ,EAAhB;AACA,QAAMK,UAAU,GAAGF,MAAM,CAACH,qBAAP,EAAnB;;AACA,QAAMD,KAAI,GAAG,IAAIH,MAAM,CAACU,OAAX,CACZF,OAAO,CAACG,IADI,EAEZH,OAAO,CAACF,GAFI,EAGZE,OAAO,CAACI,KAHI,EAIZH,UAAU,CAACF,MAAX,GAAoBC,OAAO,CAACF,GAJhB,CAAb;;AAOA,QAAKR,0BAAL,EAAkC;AACjC,aAAOK,KAAP;AACA;;AAED,WAAOE,cAAc,CAAEF,KAAF,EAAQN,SAAR,CAArB;AACA;;AAED,MAAK,CAAEH,iBAAiB,CAACK,OAAzB,EAAmC;AAClC;AACA;;AAnDA,MAqDOc,UArDP,GAqDsBnB,iBAAiB,CAACK,OArDxC,CAqDOc,UArDP;AAsDD,MAAMV,IAAI,GAAGU,UAAU,CAACT,qBAAX,EAAb;;AAEA,MAAKN,0BAAL,EAAkC;AACjC,WAAOK,IAAP;AACA;;AAED,SAAOE,cAAc,CAAEF,IAAF,EAAQU,UAAR,CAArB;AACA;;AAED,SAASR,cAAT,CAAyBF,IAAzB,EAA+BW,OAA/B,EAAyC;AAAA,8BAMpCd,MAAM,CAACe,gBAAP,CAAyBD,OAAzB,CANoC;AAAA,MAEvCE,UAFuC,yBAEvCA,UAFuC;AAAA,MAGvCC,aAHuC,yBAGvCA,aAHuC;AAAA,MAIvCC,WAJuC,yBAIvCA,WAJuC;AAAA,MAKvCC,YALuC,yBAKvCA,YALuC;;AAOxC,MAAMb,GAAG,GAAGU,UAAU,GAAGI,QAAQ,CAAEJ,UAAF,EAAc,EAAd,CAAX,GAAgC,CAAtD;AACA,MAAMT,MAAM,GAAGU,aAAa,GAAGG,QAAQ,CAAEH,aAAF,EAAiB,EAAjB,CAAX,GAAmC,CAA/D;AACA,MAAMN,IAAI,GAAGO,WAAW,GAAGE,QAAQ,CAAEF,WAAF,EAAe,EAAf,CAAX,GAAiC,CAAzD;AACA,MAAMG,KAAK,GAAGF,YAAY,GAAGC,QAAQ,CAAED,YAAF,EAAgB,EAAhB,CAAX,GAAkC,CAA5D;AAEA,SAAO;AACNG,IAAAA,CAAC,EAAEnB,IAAI,CAACQ,IAAL,GAAYA,IADT;AAENY,IAAAA,CAAC,EAAEpB,IAAI,CAACG,GAAL,GAAWA,GAFR;AAGNM,IAAAA,KAAK,EAAET,IAAI,CAACS,KAAL,GAAaD,IAAb,GAAoBU,KAHrB;AAING,IAAAA,MAAM,EAAErB,IAAI,CAACqB,MAAL,GAAclB,GAAd,GAAoBC,MAJtB;AAKNI,IAAAA,IAAI,EAAER,IAAI,CAACQ,IAAL,GAAYA,IALZ;AAMNU,IAAAA,KAAK,EAAElB,IAAI,CAACkB,KAAL,GAAaA,KANd;AAONf,IAAAA,GAAG,EAAEH,IAAI,CAACG,GAAL,GAAWA,GAPV;AAQNC,IAAAA,MAAM,EAAEJ,IAAI,CAACI,MAAL,GAAcA;AARhB,GAAP;AAUA;AAED;;;;;;;;AAMA,SAASkB,sBAAT,CAAiCC,YAAjC,EAA+CC,UAA/C,EAA4D;AAC3D;AACAzD,EAAAA,SAAS,CAAE,YAAM;AAChB;;;;;;AAMA,QAAM0D,YAAY,GAAGC,UAAU,CAAE,YAAM;AACtC,UAAK,CAAEH,YAAF,IAAkB,CAAEC,UAAU,CAAC5B,OAApC,EAA8C;AAC7C;AACA;;AAED,UAAK2B,YAAY,KAAK,cAAtB,EAAuC;AACtC;AACA;AACA,YAAMI,aAAa,GAAG1D,KAAK,CAAC2D,QAAN,CAAeC,IAAf,CACrBL,UAAU,CAAC5B,OADU,EAEnB,CAFmB,CAAtB;;AAIA,YAAK+B,aAAL,EAAqB;AACpBA,UAAAA,aAAa,CAAC1D,KAAd;AACA,SAFD,MAEO;AACNuD,UAAAA,UAAU,CAAC5B,OAAX,CAAmB3B,KAAnB;AACA;;AAED;AACA;;AAED,UAAKsD,YAAY,KAAK,WAAtB,EAAoC;AACnC;AACA;AACAC,QAAAA,UAAU,CAAC5B,OAAX,CAAmB3B,KAAnB;AACA;AACD,KA1B8B,EA0B5B,CA1B4B,CAA/B;AA4BA,WAAO;AAAA,aAAM6D,YAAY,CAAEL,YAAF,CAAlB;AAAA,KAAP;AACA,GApCQ,EAoCN,EApCM,CAAT;AAqCA;AAED;;;;;;;;;;AAQA,SAASM,YAAT,CAAuBpB,OAAvB,EAAgCqB,IAAhC,EAAsCC,KAAtC,EAA8C;AAC7C,MAAK,CAAEA,KAAP,EAAe;AACd,QAAKtB,OAAO,CAACuB,YAAR,CAAsBF,IAAtB,CAAL,EAAoC;AACnCrB,MAAAA,OAAO,CAACwB,eAAR,CAAyBH,IAAzB;AACA;AACD,GAJD,MAIO,IAAKrB,OAAO,CAACyB,YAAR,CAAsBJ,IAAtB,MAAiCC,KAAtC,EAA8C;AACpDtB,IAAAA,OAAO,CAACoB,YAAR,CAAsBC,IAAtB,EAA4BC,KAA5B;AACA;AACD;AAED;;;;;;;;;;AAQA,SAASI,QAAT,CAAmB1B,OAAnB,EAA4B2B,QAA5B,EAAmD;AAAA,MAAbL,KAAa,uEAAL,EAAK;;AAClD,MAAKtB,OAAO,CAAC4B,KAAR,CAAeD,QAAf,MAA8BL,KAAnC,EAA2C;AAC1CtB,IAAAA,OAAO,CAAC4B,KAAR,CAAeD,QAAf,IAA4BL,KAA5B;AACA;AACD;AAED;;;;;;;;;AAOA,SAASO,QAAT,CAAmB7B,OAAnB,EAA4BqB,IAA5B,EAAkCS,MAAlC,EAA2C;AAC1C,MAAKA,MAAL,EAAc;AACb,QAAK,CAAE9B,OAAO,CAAC+B,SAAR,CAAkBC,QAAlB,CAA4BX,IAA5B,CAAP,EAA4C;AAC3CrB,MAAAA,OAAO,CAAC+B,SAAR,CAAkBE,GAAlB,CAAuBZ,IAAvB;AACA;AACD,GAJD,MAIO,IAAKrB,OAAO,CAAC+B,SAAR,CAAkBC,QAAlB,CAA4BX,IAA5B,CAAL,EAA0C;AAChDrB,IAAAA,OAAO,CAAC+B,SAAR,CAAkBG,MAAlB,CAA0Bb,IAA1B;AACA;AACD;;AAED,IAAMc,OAAO,GAAG,SAAVA,OAAU,QA8BT;AAAA,MA7BNC,WA6BM,SA7BNA,WA6BM;AAAA,MA5BNC,OA4BM,SA5BNA,OA4BM;AAAA,MA3BNC,SA2BM,SA3BNA,SA2BM;AAAA,MA1BN7D,QA0BM,SA1BNA,QA0BM;AAAA,MAzBN8D,SAyBM,SAzBNA,SAyBM;AAAA,4BAxBNC,OAwBM;AAAA,MAxBNA,OAwBM,8BAxBI,IAwBJ;AAAA,MAvBNC,WAuBM,SAvBNA,WAuBM;AAAA,6BAnBNC,QAmBM;AAAA,MAnBNA,QAmBM,+BAnBK,cAmBL;AAAA,MAlBNC,KAkBM,SAlBNA,KAkBM;AAAA,iCAjBN/B,YAiBM;AAAA,MAjBNA,YAiBM,mCAjBS,cAiBT;AAAA,MAhBN7B,SAgBM,SAhBNA,SAgBM;AAAA,MAfNC,0BAeM,SAfNA,0BAeM;AAAA,MAdNH,UAcM,SAdNA,UAcM;AAAA,MAbNC,aAaM,SAbNA,aAaM;AAAA,MAZN8D,cAYM,SAZNA,cAYM;AAAA,4BAXNC,OAWM;AAAA,MAXNA,OAWM,8BAXI,IAWJ;AAAA,MAVNC,cAUM,SAVNA,cAUM;AAAA,MATNC,cASM,SATNA,cASM;AAAA,MARNC,gBAQM,SARNA,gBAQM;AAAA,oCAPNC,kBAOM;AAAA,MAPNA,kBAOM,sCAPevE,SAOf;AAAA,MANNwE,uCAMM,SANNA,uCAMM;AAAA,MALNC,yCAKM,SALNA,yCAKM;AAAA,oCAJNC,uBAIM;AAAA,MAJNA,uBAIM,sCAJoB,IAIpB;AAAA,MAHNC,wBAGM,SAHNA,wBAGM;AAAA,MADHC,YACG;;AACN,MAAM1E,iBAAiB,GAAG1B,MAAM,CAAE,IAAF,CAAhC;AACA,MAAM2D,UAAU,GAAG3D,MAAM,CAAE,IAAF,CAAzB;AACA,MAAMqG,YAAY,GAAGrG,MAAM,EAA3B;AACA,MAAMsG,gBAAgB,GAAG9F,gBAAgB,CAAE,QAAF,EAAY,GAAZ,CAAzC;;AAJM,kBAKsCP,QAAQ,EAL9C;AAAA;AAAA,MAKEsG,aALF;AAAA,MAKiBC,gBALjB;;AAMN,MAAMC,IAAI,GAAGrF,OAAO,CAAE2E,kBAAF,CAApB;AACA,MAAMW,UAAU,GAAGhB,cAAc,IAAIY,gBAArC;;AAPM,2BAQ2C7F,iBAAiB,EAR5D;AAAA;AAAA,MAQEkG,uBARF;AAAA,MAQ2BC,WAR3B;;AASNtB,EAAAA,OAAO,GAAGoB,UAAU,IAAIpB,OAAxB;AAEAnF,EAAAA,eAAe,CAAE,YAAM;AACtB,QAAKuG,UAAL,EAAkB;AACjB/B,MAAAA,QAAQ,CAAE0B,YAAY,CAACtE,OAAf,EAAwB,kBAAxB,EAA4CuD,OAA5C,CAAR;AACAX,MAAAA,QAAQ,CAAE0B,YAAY,CAACtE,OAAf,EAAwB,cAAxB,EAAwCwD,WAAxC,CAAR;AACArB,MAAAA,YAAY,CAAEmC,YAAY,CAACtE,OAAf,EAAwB,aAAxB,CAAZ;AACAmC,MAAAA,YAAY,CAAEmC,YAAY,CAACtE,OAAf,EAAwB,aAAxB,CAAZ;AACAyC,MAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,KAAxB,CAAR;AACAyC,MAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,MAAxB,CAAR;AACAyC,MAAAA,QAAQ,CAAEb,UAAU,CAAC5B,OAAb,EAAsB,WAAtB,CAAR;AACAyC,MAAAA,QAAQ,CAAEb,UAAU,CAAC5B,OAAb,EAAsB,UAAtB,CAAR;AACAyC,MAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,UAAxB,CAAR;AACA;AACA;;AAED,QAAM8E,OAAO,GAAG,SAAVA,OAAU,GAA0B;AAAA,sFAAR,EAAQ;AAAA,UAAtBC,SAAsB,SAAtBA,SAAsB;;AACzC,UAAK,CAAET,YAAY,CAACtE,OAAf,IAA0B,CAAE4B,UAAU,CAAC5B,OAA5C,EAAsD;AACrD;AACA;;AAED,UAAIgF,MAAM,GAAGtF,iBAAiB,CAC7BC,iBAD6B,EAE7BC,UAF6B,EAG7BC,aAH6B,EAI7BC,SAJ6B,EAK7BC,0BAL6B,CAA9B;;AAQA,UAAK,CAAEiF,MAAP,EAAgB;AACf;AACA;;AAED,UAAIC,iBAAiB,GAAG,CAAxB,CAjByC,CAmBzC;AACA;AACA;AACA;AACA;;AACA,UAAK,CAAEd,uBAAP,EAAiC;AAChC1B,QAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,UAAxB,EAAoC,UAApC,CAAR;AADgC,YAGxBkF,YAHwB,GAGPZ,YAAY,CAACtE,OAHN,CAGxBkF,YAHwB;AAIhC,YAAMC,gBAAgB,GAAGD,YAAY,CAAC7E,qBAAb,EAAzB;AAEA4E,QAAAA,iBAAiB,GAAGE,gBAAgB,CAAC5E,GAArC;AACAyE,QAAAA,MAAM,GAAG,IAAI/E,MAAM,CAACU,OAAX,CACRqE,MAAM,CAACpE,IAAP,GAAcuE,gBAAgB,CAACvE,IADvB,EAERoE,MAAM,CAACzE,GAAP,GAAa4E,gBAAgB,CAAC5E,GAFtB,EAGRyE,MAAM,CAACnE,KAHC,EAIRmE,MAAM,CAACvD,MAJC,CAAT;AAMA,OAbD,MAaO;AACNgB,QAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,UAAxB,CAAR;AACA;;AAED,UAAIoF,eAAJ;;AACA,UAAKhB,wBAAL,EAAgC;AAAA;;AAC/BgB,QAAAA,eAAe,4BAAGd,YAAY,CAACtE,OAAb,CAAqBqF,OAArB,CACjB,eADiB,CAAH,0DAAG,sBAEfvE,UAFH;AAGA;;AAED,UAAMwE,eAAe,GAAG,CAAET,WAAW,CAACpD,MAAd,GACrBG,UAAU,CAAC5B,OAAX,CAAmBK,qBAAnB,EADqB,GAErBwE,WAFH;;AAhDyC,kCA2DrCjG,sBAAsB,CACzBoG,MADyB,EAEzBM,eAFyB,EAGzB7B,QAHyB,EAIzBM,gBAJyB,EAKzBO,YAAY,CAACtE,OALY,EAMzBiF,iBANyB,EAOzBG,eAPyB,CA3De;AAAA,UAqDxCG,UArDwC,yBAqDxCA,UArDwC;AAAA,UAsDxCC,WAtDwC,yBAsDxCA,WAtDwC;AAAA,UAuDxCC,KAvDwC,yBAuDxCA,KAvDwC;AAAA,UAwDxCC,KAxDwC,yBAwDxCA,KAxDwC;AAAA,UAyDxCC,aAzDwC,yBAyDxCA,aAzDwC;AAAA,UA0DxCC,YA1DwC,yBA0DxCA,YA1DwC;;AAqEzC,UACC,OAAOL,UAAP,KAAsB,QAAtB,IACA,OAAOC,WAAP,KAAuB,QAFxB,EAGE;AACD,YAAKT,SAAS,IAAId,uCAAlB,EAA4D;AAC3DxB,UAAAA,QAAQ,CACP6B,YAAY,CAACtE,OADN,EAEP,MAFO,EAGPwF,WAAW,GAAG,IAHP,CAAR;AAKA/C,UAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,KAAxB,CAAR;AACAyC,UAAAA,QAAQ,CACP6B,YAAY,CAACtE,OADN,EAEP,WAFO,uBAGQuF,UAHR,SAAR;AAKA,SAZD,MAYO,IACNR,SAAS,IACTb,yCAFM,EAGL;AACDzB,UAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,KAAxB,EAA+BuF,UAAU,GAAG,IAA5C,CAAR;AACA9C,UAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,MAAxB,CAAR;AACAyC,UAAAA,QAAQ,CACP6B,YAAY,CAACtE,OADN,EAEP,WAFO,sBAGOwF,WAHP,SAAR;AAKA,SAXM,MAWA;AACN/C,UAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,KAAxB,EAA+BuF,UAAU,GAAG,IAA5C,CAAR;AACA9C,UAAAA,QAAQ,CACP6B,YAAY,CAACtE,OADN,EAEP,MAFO,EAGPwF,WAAW,GAAG,IAHP,CAAR;AAKA/C,UAAAA,QAAQ,CAAE6B,YAAY,CAACtE,OAAf,EAAwB,WAAxB,CAAR;AACA;AACD;;AAED4C,MAAAA,QAAQ,CACP0B,YAAY,CAACtE,OADN,EAEP,kBAFO,EAGPuD,OAAO,IAAMkC,KAAK,KAAK,QAAV,IAAsBC,KAAK,KAAK,QAHtC,CAAR;AAKA9C,MAAAA,QAAQ,CAAE0B,YAAY,CAACtE,OAAf,EAAwB,cAAxB,EAAwCwD,WAAxC,CAAR;AACArB,MAAAA,YAAY,CAAEmC,YAAY,CAACtE,OAAf,EAAwB,aAAxB,EAAuCyF,KAAvC,CAAZ;AACAtD,MAAAA,YAAY,CAAEmC,YAAY,CAACtE,OAAf,EAAwB,aAAxB,EAAuC0F,KAAvC,CAAZ;AACAjD,MAAAA,QAAQ,CACPb,UAAU,CAAC5B,OADJ,EAEP,WAFO,EAGP,OAAO2F,aAAP,KAAyB,QAAzB,GAAoCA,aAAa,GAAG,IAApD,GAA2D,EAHpD,CAAR;AAKAlD,MAAAA,QAAQ,CACPb,UAAU,CAAC5B,OADJ,EAEP,UAFO,EAGP,OAAO4F,YAAP,KAAwB,QAAxB,GAAmCA,YAAY,GAAG,IAAlD,GAAyD,EAHlD,CAAR,CAxHyC,CA8HzC;;AACA,UAAMC,YAAY,GAAG;AACpBtF,QAAAA,GAAG,EAAE,QADe;AAEpBC,QAAAA,MAAM,EAAE;AAFY,OAArB;AAIA,UAAMsF,YAAY,GAAG;AACpBlF,QAAAA,IAAI,EAAE,OADc;AAEpBU,QAAAA,KAAK,EAAE;AAFa,OAArB;AAIA,UAAMyE,YAAY,GAAGF,YAAY,CAAEH,KAAF,CAAZ,IAAyB,QAA9C;AACA,UAAMM,YAAY,GAAGF,YAAY,CAAEL,KAAF,CAAZ,IAAyB,QAA9C;AAEAhB,MAAAA,gBAAgB,CAAEuB,YAAY,GAAG,GAAf,GAAqBD,YAAvB,CAAhB;AACA,KA3ID,CAdsB,CA2JtB;;;AACA,QAAME,SAAS,GAAGhG,MAAM,CAAC6B,UAAP,CAAmBgD,OAAnB,CAAlB;AAEA;;;;;;;;AAOA,QAAMoB,cAAc,GAAGjG,MAAM,CAACkG,WAAP,CAAoBrB,OAApB,EAA6B,GAA7B,CAAvB;AAEA,QAAIsB,KAAJ;;AAEA,QAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AACrCpG,MAAAA,MAAM,CAACqG,oBAAP,CAA6BF,KAA7B;AACAA,MAAAA,KAAK,GAAGnG,MAAM,CAACsG,qBAAP,CAA8BzB,OAA9B,CAAR;AACA,KAHD,CAzKsB,CA8KtB;AACA;AACA;;;AACA7E,IAAAA,MAAM,CAACuG,gBAAP,CAAyB,OAAzB,EAAkCH,uBAAlC;AACApG,IAAAA,MAAM,CAACuG,gBAAP,CAAyB,QAAzB,EAAmC1B,OAAnC;AACA7E,IAAAA,MAAM,CAACuG,gBAAP,CAAyB,QAAzB,EAAmC1B,OAAnC,EAA4C,IAA5C;AAEA,QAAI2B,QAAJ;AAEA,QAAMC,cAAc,GACnBzC,uCAAuC,IACvCC,yCAFD;;AAIA,QAAKwC,cAAL,EAAsB;AACrBD,MAAAA,QAAQ,GAAG,IAAIxG,MAAM,CAAC0G,gBAAX,CAA6B;AAAA,eACvC7B,OAAO,CAAE;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAF,CADgC;AAAA,OAA7B,CAAX;AAGA0B,MAAAA,QAAQ,CAACG,OAAT,CAAkBF,cAAlB,EAAkC;AAAEG,QAAAA,UAAU,EAAE;AAAd,OAAlC;AACA;;AAED,WAAO,YAAM;AACZ5G,MAAAA,MAAM,CAACiC,YAAP,CAAqB+D,SAArB;AACAhG,MAAAA,MAAM,CAAC6G,aAAP,CAAsBZ,cAAtB;AACAjG,MAAAA,MAAM,CAAC8G,mBAAP,CAA4B,QAA5B,EAAsCjC,OAAtC;AACA7E,MAAAA,MAAM,CAAC8G,mBAAP,CAA4B,QAA5B,EAAsCjC,OAAtC,EAA+C,IAA/C;AACA7E,MAAAA,MAAM,CAAC8G,mBAAP,CAA4B,OAA5B,EAAqCV,uBAArC;AACApG,MAAAA,MAAM,CAACqG,oBAAP,CAA6BF,KAA7B;;AAEA,UAAKK,QAAL,EAAgB;AACfA,QAAAA,QAAQ,CAACO,UAAT;AACA;AACD,KAXD;AAYA,GA9Mc,EA8MZ,CACFrC,UADE,EAEF/E,UAFE,EAGFC,aAHE,EAIFC,SAJE,EAKFC,0BALE,EAMF0D,QANE,EAOFoB,WAPE,EAQFd,gBARE,EASFE,uCATE,EAUFC,yCAVE,EAWFE,wBAXE,CA9MY,CAAf;AA4NA1C,EAAAA,sBAAsB,CAAEC,YAAF,EAAgBC,UAAhB,CAAtB,CAvOM,CAyON;;AACA,MAAMqF,UAAU,GAAG,SAAbA,UAAa,CAAEC,KAAF,EAAa;AAC/B;AACA,QAAKA,KAAK,CAACC,OAAN,KAAkB5I,MAAlB,IAA4B6E,OAAjC,EAA2C;AAC1C8D,MAAAA,KAAK,CAACE,eAAN;AACAhE,MAAAA,OAAO;AACP,KAL8B,CAO/B;;;AACA,QAAKC,SAAL,EAAiB;AAChBA,MAAAA,SAAS,CAAE6D,KAAF,CAAT;AACA;AACD,GAXD;AAaA;;;;;;;;AAMA,WAASG,oBAAT,CAA+BH,KAA/B,EAAuC;AACtC;AACA;AACA;AACA,QAAKpD,cAAL,EAAsB;AACrBA,MAAAA,cAAc,CAAEoD,KAAF,CAAd;AACA;AACA,KAHD,MAGO,IAAK,CAAErD,cAAP,EAAwB;AAC9B,UAAKT,OAAL,EAAe;AACdA,QAAAA,OAAO;AACP;;AACD;AACA,KAZqC,CActC;AACA;;;AACA,QAAIkE,UAAJ;;AACA,QAAI;AACHA,MAAAA,UAAU,GAAG,IAAIrH,MAAM,CAACsH,UAAX,CAAuB,OAAvB,CAAb;AACA,KAFD,CAEE,OAAQC,KAAR,EAAgB;AACjBF,MAAAA,UAAU,GAAGG,QAAQ,CAACC,WAAT,CAAsB,YAAtB,CAAb;AACAJ,MAAAA,UAAU,CAACK,cAAX,CACC,OADD,EAEC,IAFD,EAGC,IAHD,EAIC1H,MAJD,EAKC,CALD,EAMC,CAND,EAOC,CAPD,EAQC,CARD,EASC,CATD,EAUC,KAVD,EAWC,KAXD,EAYC,KAZD,EAaC,KAbD,EAcC,CAdD,EAeC,IAfD;AAiBA;;AAED2H,IAAAA,MAAM,CAACC,cAAP,CAAuBP,UAAvB,EAAmC,QAAnC,EAA6C;AAC5CQ,MAAAA,GAAG,EAAE;AAAA,eAAMZ,KAAK,CAACa,aAAZ;AAAA;AADuC,KAA7C;AAIAvJ,IAAAA,UAAU,CAAE,6BAAF,EAAiC;AAC1CwJ,MAAAA,WAAW,EAAE;AAD6B,KAAjC,CAAV;AAIAnE,IAAAA,cAAc,CAAEyD,UAAF,CAAd;AACA,GA9SK,CAgTN;AACA;;;AAEA,MAAIW,OAAO,GACV,cAAC,oBAAD;AAAsB,IAAA,cAAc,EAAGZ;AAAvC,KACC,cAAC,OAAD;AACC,IAAA,IAAI,EAAGzD,OAAO,IAAIY,aAAX,GAA2B,QAA3B,GAAsC,IAD9C;AAEC,IAAA,OAAO,EAAG;AAAE0D,MAAAA,MAAM,EAAE1D;AAAV;AAFX,KAIG;AAAA,QAAe2D,gBAAf,SAAI7E,SAAJ;AAAA,WACD,cAAC,sBAAD;AACC,MAAA,SAAS,EAAGtF,UAAU,CACrB,oBADqB,EAErBsF,SAFqB,EAGrB6E,gBAHqB,EAIrB;AACC,uBAAexD,UADhB;AAEC,4BAAoBpB,OAFrB;AAGC,wBAAgBC;AAHjB,OAJqB;AADvB,OAWMa,YAXN;AAYC,MAAA,SAAS,EAAG4C,UAZb;AAaC,MAAA,GAAG,EAAG3C;AAbP,QAeGK,UAAU,IAAI,cAAC,UAAD,OAfjB,EAgBGA,UAAU,IACX;AAAK,MAAA,SAAS,EAAC;AAAf,OACC;AAAM,MAAA,SAAS,EAAC;AAAhB,OACGxB,WADH,CADD,EAIC,cAAC,MAAD;AACC,MAAA,SAAS,EAAC,2BADX;AAEC,MAAA,IAAI,EAAGxE,KAFR;AAGC,MAAA,OAAO,EAAGyE;AAHX,MAJD,CAjBF,EA4BC;AACC,MAAA,GAAG,EAAGxB,UADP;AAEC,MAAA,SAAS,EAAC,6BAFX;AAGC,MAAA,QAAQ,EAAC;AAHV,OAKC;AAAK,MAAA,KAAK,EAAG;AAAE6B,QAAAA,QAAQ,EAAE;AAAZ;AAAb,OACGmB,uBADH,EAEGpF,QAFH,CALD,CA5BD,CADC;AAAA,GAJH,CADD,CADD,CAnTM,CAsWN;AACA;;AACA,MAAKmC,YAAL,EAAoB;AACnBsG,IAAAA,OAAO,GAAG,cAAC,YAAD,QAAgBA,OAAhB,CAAV;AACA;;AAED,MAAKvD,IAAI,CAAC0D,GAAV,EAAgB;AACfH,IAAAA,OAAO,GAAG,cAAC,IAAD;AAAM,MAAA,IAAI,EAAGjE;AAAb,OAAoCiE,OAApC,CAAV;AACA;;AAED,MAAKnI,SAAS,IAAIF,UAAlB,EAA+B;AAC9B,WAAOqI,OAAP;AACA;;AAED,SAAO;AAAM,IAAA,GAAG,EAAGtI;AAAZ,KAAkCsI,OAAlC,CAAP;AACA,CAnZD;;AAqZA,IAAMI,gBAAgB,GAAGnF,OAAzB;;AAEAmF,gBAAgB,CAAClJ,IAAjB,GAAwB;AAAA,yBAAIiD,IAAJ;AAAA,MAAIA,IAAJ,2BAAW3C,SAAX;AAAA,SACvB,cAAC,IAAD;AAAM,IAAA,gBAAgB,MAAtB;AAAuB,IAAA,IAAI,EAAG2C,IAA9B;AAAqC,IAAA,SAAS,EAAC;AAA/C,IADuB;AAAA,CAAxB;;AAIA,eAAeiG,gBAAf","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseState,\n\tuseEffect,\n\tuseLayoutEffect,\n} from '@wordpress/element';\nimport { focus, getRectangleFromRange } from '@wordpress/dom';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\nimport { useViewportMatch, useResizeObserver } from '@wordpress/compose';\nimport { close } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { computePopoverPosition } from './utils';\nimport withFocusReturn from '../higher-order/with-focus-return';\nimport withConstrainedTabbing from '../higher-order/with-constrained-tabbing';\nimport PopoverDetectOutside from './detect-outside';\nimport Button from '../button';\nimport ScrollLock from '../scroll-lock';\nimport IsolatedEventContainer from '../isolated-event-container';\nimport { Slot, Fill, useSlot } from '../slot-fill';\nimport Animate from '../animate';\n\nconst FocusManaged = withConstrainedTabbing(\n\twithFocusReturn( ( { children } ) => children )\n);\n\n/**\n * Name of slot in which popover should fill.\n *\n * @type {string}\n */\nconst SLOT_NAME = 'Popover';\n\nfunction computeAnchorRect(\n\tanchorRefFallback,\n\tanchorRect,\n\tgetAnchorRect,\n\tanchorRef = false,\n\tshouldAnchorIncludePadding\n) {\n\tif ( anchorRect ) {\n\t\treturn anchorRect;\n\t}\n\n\tif ( getAnchorRect ) {\n\t\tif ( ! anchorRefFallback.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn getAnchorRect( anchorRefFallback.current );\n\t}\n\n\tif ( anchorRef !== false ) {\n\t\tif ( ! anchorRef ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( anchorRef instanceof window.Range ) {\n\t\t\treturn getRectangleFromRange( anchorRef );\n\t\t}\n\n\t\tif ( anchorRef instanceof window.Element ) {\n\t\t\tconst rect = anchorRef.getBoundingClientRect();\n\n\t\t\tif ( shouldAnchorIncludePadding ) {\n\t\t\t\treturn rect;\n\t\t\t}\n\n\t\t\treturn withoutPadding( rect, anchorRef );\n\t\t}\n\n\t\tconst { top, bottom } = anchorRef;\n\t\tconst topRect = top.getBoundingClientRect();\n\t\tconst bottomRect = bottom.getBoundingClientRect();\n\t\tconst rect = new window.DOMRect(\n\t\t\ttopRect.left,\n\t\t\ttopRect.top,\n\t\t\ttopRect.width,\n\t\t\tbottomRect.bottom - topRect.top\n\t\t);\n\n\t\tif ( shouldAnchorIncludePadding ) {\n\t\t\treturn rect;\n\t\t}\n\n\t\treturn withoutPadding( rect, anchorRef );\n\t}\n\n\tif ( ! anchorRefFallback.current ) {\n\t\treturn;\n\t}\n\n\tconst { parentNode } = anchorRefFallback.current;\n\tconst rect = parentNode.getBoundingClientRect();\n\n\tif ( shouldAnchorIncludePadding ) {\n\t\treturn rect;\n\t}\n\n\treturn withoutPadding( rect, parentNode );\n}\n\nfunction withoutPadding( rect, element ) {\n\tconst {\n\t\tpaddingTop,\n\t\tpaddingBottom,\n\t\tpaddingLeft,\n\t\tpaddingRight,\n\t} = window.getComputedStyle( element );\n\tconst top = paddingTop ? parseInt( paddingTop, 10 ) : 0;\n\tconst bottom = paddingBottom ? parseInt( paddingBottom, 10 ) : 0;\n\tconst left = paddingLeft ? parseInt( paddingLeft, 10 ) : 0;\n\tconst right = paddingRight ? parseInt( paddingRight, 10 ) : 0;\n\n\treturn {\n\t\tx: rect.left + left,\n\t\ty: rect.top + top,\n\t\twidth: rect.width - left - right,\n\t\theight: rect.height - top - bottom,\n\t\tleft: rect.left + left,\n\t\tright: rect.right - right,\n\t\ttop: rect.top + top,\n\t\tbottom: rect.bottom - bottom,\n\t};\n}\n\n/**\n * Hook used to focus the first tabbable element on mount.\n *\n * @param {boolean|string} focusOnMount Focus on mount mode.\n * @param {Object}         contentRef   Reference to the popover content element.\n */\nfunction useFocusContentOnMount( focusOnMount, contentRef ) {\n\t// Focus handling\n\tuseEffect( () => {\n\t\t/*\n\t\t * Without the setTimeout, the dom node is not being focused. Related:\n\t\t * https://stackoverflow.com/questions/35522220/react-ref-with-focus-doesnt-work-without-settimeout-my-example\n\t\t *\n\t\t * TODO: Treat the cause, not the symptom.\n\t\t */\n\t\tconst focusTimeout = setTimeout( () => {\n\t\t\tif ( ! focusOnMount || ! contentRef.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( focusOnMount === 'firstElement' ) {\n\t\t\t\t// Find first tabbable node within content and shift focus, falling\n\t\t\t\t// back to the popover panel itself.\n\t\t\t\tconst firstTabbable = focus.tabbable.find(\n\t\t\t\t\tcontentRef.current\n\t\t\t\t)[ 0 ];\n\n\t\t\t\tif ( firstTabbable ) {\n\t\t\t\t\tfirstTabbable.focus();\n\t\t\t\t} else {\n\t\t\t\t\tcontentRef.current.focus();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( focusOnMount === 'container' ) {\n\t\t\t\t// Focus the popover panel itself so items in the popover are easily\n\t\t\t\t// accessed via keyboard navigation.\n\t\t\t\tcontentRef.current.focus();\n\t\t\t}\n\t\t}, 0 );\n\n\t\treturn () => clearTimeout( focusTimeout );\n\t}, [] );\n}\n\n/**\n * Sets or removes an element attribute.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The attribute name to set or remove.\n * @param {?string} value   The value to set. A falsy value will remove the\n *                          attribute.\n */\nfunction setAttribute( element, name, value ) {\n\tif ( ! value ) {\n\t\tif ( element.hasAttribute( name ) ) {\n\t\t\telement.removeAttribute( name );\n\t\t}\n\t} else if ( element.getAttribute( name ) !== value ) {\n\t\telement.setAttribute( name, value );\n\t}\n}\n\n/**\n * Sets or removes an element style property.\n *\n * @param {Element} element  The element to modify.\n * @param {string}  property The property to set or remove.\n * @param {?string} value    The value to set. A falsy value will remove the\n *                           property.\n */\nfunction setStyle( element, property, value = '' ) {\n\tif ( element.style[ property ] !== value ) {\n\t\telement.style[ property ] = value;\n\t}\n}\n\n/**\n * Sets or removes an element class.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The class to set or remove.\n * @param {boolean} toggle  True to set the class, false to remove.\n */\nfunction setClass( element, name, toggle ) {\n\tif ( toggle ) {\n\t\tif ( ! element.classList.contains( name ) ) {\n\t\t\telement.classList.add( name );\n\t\t}\n\t} else if ( element.classList.contains( name ) ) {\n\t\telement.classList.remove( name );\n\t}\n}\n\nconst Popover = ( {\n\theaderTitle,\n\tonClose,\n\tonKeyDown,\n\tchildren,\n\tclassName,\n\tnoArrow = true,\n\tisAlternate,\n\t// Disable reason: We generate the `...contentProps` rest as remainder\n\t// of props which aren't explicitly handled by this component.\n\t/* eslint-disable no-unused-vars */\n\tposition = 'bottom right',\n\trange,\n\tfocusOnMount = 'firstElement',\n\tanchorRef,\n\tshouldAnchorIncludePadding,\n\tanchorRect,\n\tgetAnchorRect,\n\texpandOnMobile,\n\tanimate = true,\n\tonClickOutside,\n\tonFocusOutside,\n\t__unstableSticky,\n\t__unstableSlotName = SLOT_NAME,\n\t__unstableAllowVerticalSubpixelPosition,\n\t__unstableAllowHorizontalSubpixelPosition,\n\t__unstableFixedPosition = true,\n\t__unstableBoundaryParent,\n\t/* eslint-enable no-unused-vars */\n\t...contentProps\n} ) => {\n\tconst anchorRefFallback = useRef( null );\n\tconst contentRef = useRef( null );\n\tconst containerRef = useRef();\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst [ animateOrigin, setAnimateOrigin ] = useState();\n\tconst slot = useSlot( __unstableSlotName );\n\tconst isExpanded = expandOnMobile && isMobileViewport;\n\tconst [ containerResizeListener, contentSize ] = useResizeObserver();\n\tnoArrow = isExpanded || noArrow;\n\n\tuseLayoutEffect( () => {\n\t\tif ( isExpanded ) {\n\t\t\tsetClass( containerRef.current, 'is-without-arrow', noArrow );\n\t\t\tsetClass( containerRef.current, 'is-alternate', isAlternate );\n\t\t\tsetAttribute( containerRef.current, 'data-x-axis' );\n\t\t\tsetAttribute( containerRef.current, 'data-y-axis' );\n\t\t\tsetStyle( containerRef.current, 'top' );\n\t\t\tsetStyle( containerRef.current, 'left' );\n\t\t\tsetStyle( contentRef.current, 'maxHeight' );\n\t\t\tsetStyle( contentRef.current, 'maxWidth' );\n\t\t\tsetStyle( containerRef.current, 'position' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst refresh = ( { subpixels } = {} ) => {\n\t\t\tif ( ! containerRef.current || ! contentRef.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet anchor = computeAnchorRect(\n\t\t\t\tanchorRefFallback,\n\t\t\t\tanchorRect,\n\t\t\t\tgetAnchorRect,\n\t\t\t\tanchorRef,\n\t\t\t\tshouldAnchorIncludePadding\n\t\t\t);\n\n\t\t\tif ( ! anchor ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet relativeOffsetTop = 0;\n\n\t\t\t// If there is a positioned ancestor element that is not the body,\n\t\t\t// subtract the position from the anchor rect. If the position of\n\t\t\t// the popover is fixed, the offset parent is null or the body\n\t\t\t// element, in which case the position is relative to the viewport.\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n\t\t\tif ( ! __unstableFixedPosition ) {\n\t\t\t\tsetStyle( containerRef.current, 'position', 'absolute' );\n\n\t\t\t\tconst { offsetParent } = containerRef.current;\n\t\t\t\tconst offsetParentRect = offsetParent.getBoundingClientRect();\n\n\t\t\t\trelativeOffsetTop = offsetParentRect.top;\n\t\t\t\tanchor = new window.DOMRect(\n\t\t\t\t\tanchor.left - offsetParentRect.left,\n\t\t\t\t\tanchor.top - offsetParentRect.top,\n\t\t\t\t\tanchor.width,\n\t\t\t\t\tanchor.height\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetStyle( containerRef.current, 'position' );\n\t\t\t}\n\n\t\t\tlet boundaryElement;\n\t\t\tif ( __unstableBoundaryParent ) {\n\t\t\t\tboundaryElement = containerRef.current.closest(\n\t\t\t\t\t'.popover-slot'\n\t\t\t\t)?.parentNode;\n\t\t\t}\n\n\t\t\tconst usedContentSize = ! contentSize.height\n\t\t\t\t? contentRef.current.getBoundingClientRect()\n\t\t\t\t: contentSize;\n\n\t\t\tconst {\n\t\t\t\tpopoverTop,\n\t\t\t\tpopoverLeft,\n\t\t\t\txAxis,\n\t\t\t\tyAxis,\n\t\t\t\tcontentHeight,\n\t\t\t\tcontentWidth,\n\t\t\t} = computePopoverPosition(\n\t\t\t\tanchor,\n\t\t\t\tusedContentSize,\n\t\t\t\tposition,\n\t\t\t\t__unstableSticky,\n\t\t\t\tcontainerRef.current,\n\t\t\t\trelativeOffsetTop,\n\t\t\t\tboundaryElement\n\t\t\t);\n\n\t\t\tif (\n\t\t\t\ttypeof popoverTop === 'number' &&\n\t\t\t\ttypeof popoverLeft === 'number'\n\t\t\t) {\n\t\t\t\tif ( subpixels && __unstableAllowVerticalSubpixelPosition ) {\n\t\t\t\t\tsetStyle(\n\t\t\t\t\t\tcontainerRef.current,\n\t\t\t\t\t\t'left',\n\t\t\t\t\t\tpopoverLeft + 'px'\n\t\t\t\t\t);\n\t\t\t\t\tsetStyle( containerRef.current, 'top' );\n\t\t\t\t\tsetStyle(\n\t\t\t\t\t\tcontainerRef.current,\n\t\t\t\t\t\t'transform',\n\t\t\t\t\t\t`translateY(${ popoverTop }px)`\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\tsubpixels &&\n\t\t\t\t\t__unstableAllowHorizontalSubpixelPosition\n\t\t\t\t) {\n\t\t\t\t\tsetStyle( containerRef.current, 'top', popoverTop + 'px' );\n\t\t\t\t\tsetStyle( containerRef.current, 'left' );\n\t\t\t\t\tsetStyle(\n\t\t\t\t\t\tcontainerRef.current,\n\t\t\t\t\t\t'transform',\n\t\t\t\t\t\t`translate(${ popoverLeft }px)`\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tsetStyle( containerRef.current, 'top', popoverTop + 'px' );\n\t\t\t\t\tsetStyle(\n\t\t\t\t\t\tcontainerRef.current,\n\t\t\t\t\t\t'left',\n\t\t\t\t\t\tpopoverLeft + 'px'\n\t\t\t\t\t);\n\t\t\t\t\tsetStyle( containerRef.current, 'transform' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetClass(\n\t\t\t\tcontainerRef.current,\n\t\t\t\t'is-without-arrow',\n\t\t\t\tnoArrow || ( xAxis === 'center' && yAxis === 'middle' )\n\t\t\t);\n\t\t\tsetClass( containerRef.current, 'is-alternate', isAlternate );\n\t\t\tsetAttribute( containerRef.current, 'data-x-axis', xAxis );\n\t\t\tsetAttribute( containerRef.current, 'data-y-axis', yAxis );\n\t\t\tsetStyle(\n\t\t\t\tcontentRef.current,\n\t\t\t\t'maxHeight',\n\t\t\t\ttypeof contentHeight === 'number' ? contentHeight + 'px' : ''\n\t\t\t);\n\t\t\tsetStyle(\n\t\t\t\tcontentRef.current,\n\t\t\t\t'maxWidth',\n\t\t\t\ttypeof contentWidth === 'number' ? contentWidth + 'px' : ''\n\t\t\t);\n\n\t\t\t// Compute the animation position\n\t\t\tconst yAxisMapping = {\n\t\t\t\ttop: 'bottom',\n\t\t\t\tbottom: 'top',\n\t\t\t};\n\t\t\tconst xAxisMapping = {\n\t\t\t\tleft: 'right',\n\t\t\t\tright: 'left',\n\t\t\t};\n\t\t\tconst animateYAxis = yAxisMapping[ yAxis ] || 'middle';\n\t\t\tconst animateXAxis = xAxisMapping[ xAxis ] || 'center';\n\n\t\t\tsetAnimateOrigin( animateXAxis + ' ' + animateYAxis );\n\t\t};\n\n\t\t// Height may still adjust between now and the next tick.\n\t\tconst timeoutId = window.setTimeout( refresh );\n\n\t\t/*\n\t\t * There are sometimes we need to reposition or resize the popover that\n\t\t * are not handled by the resize/scroll window events (i.e. CSS changes\n\t\t * in the layout that changes the position of the anchor).\n\t\t *\n\t\t * For these situations, we refresh the popover every 0.5s\n\t\t */\n\t\tconst intervalHandle = window.setInterval( refresh, 500 );\n\n\t\tlet rafId;\n\n\t\tconst refreshOnAnimationFrame = () => {\n\t\t\twindow.cancelAnimationFrame( rafId );\n\t\t\trafId = window.requestAnimationFrame( refresh );\n\t\t};\n\n\t\t// Sometimes a click trigger a layout change that affects the popover\n\t\t// position. This is an opportunity to immediately refresh rather than\n\t\t// at the interval.\n\t\twindow.addEventListener( 'click', refreshOnAnimationFrame );\n\t\twindow.addEventListener( 'resize', refresh );\n\t\twindow.addEventListener( 'scroll', refresh, true );\n\n\t\tlet observer;\n\n\t\tconst observeElement =\n\t\t\t__unstableAllowVerticalSubpixelPosition ||\n\t\t\t__unstableAllowHorizontalSubpixelPosition;\n\n\t\tif ( observeElement ) {\n\t\t\tobserver = new window.MutationObserver( () =>\n\t\t\t\trefresh( { subpixels: true } )\n\t\t\t);\n\t\t\tobserver.observe( observeElement, { attributes: true } );\n\t\t}\n\n\t\treturn () => {\n\t\t\twindow.clearTimeout( timeoutId );\n\t\t\twindow.clearInterval( intervalHandle );\n\t\t\twindow.removeEventListener( 'resize', refresh );\n\t\t\twindow.removeEventListener( 'scroll', refresh, true );\n\t\t\twindow.removeEventListener( 'click', refreshOnAnimationFrame );\n\t\t\twindow.cancelAnimationFrame( rafId );\n\n\t\t\tif ( observer ) {\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t};\n\t}, [\n\t\tisExpanded,\n\t\tanchorRect,\n\t\tgetAnchorRect,\n\t\tanchorRef,\n\t\tshouldAnchorIncludePadding,\n\t\tposition,\n\t\tcontentSize,\n\t\t__unstableSticky,\n\t\t__unstableAllowVerticalSubpixelPosition,\n\t\t__unstableAllowHorizontalSubpixelPosition,\n\t\t__unstableBoundaryParent,\n\t] );\n\n\tuseFocusContentOnMount( focusOnMount, contentRef );\n\n\t// Event handlers\n\tconst maybeClose = ( event ) => {\n\t\t// Close on escape\n\t\tif ( event.keyCode === ESCAPE && onClose ) {\n\t\t\tevent.stopPropagation();\n\t\t\tonClose();\n\t\t}\n\n\t\t// Preserve original content prop behavior\n\t\tif ( onKeyDown ) {\n\t\t\tonKeyDown( event );\n\t\t}\n\t};\n\n\t/**\n\t * Shims an onFocusOutside callback to be compatible with a deprecated\n\t * onClickOutside prop function, if provided.\n\t *\n\t * @param {FocusEvent} event Focus event from onFocusOutside.\n\t */\n\tfunction handleOnFocusOutside( event ) {\n\t\t// Defer to given `onFocusOutside` if specified. Call `onClose` only if\n\t\t// both `onFocusOutside` and `onClickOutside` are unspecified. Doing so\n\t\t// assures backwards-compatibility for prior `onClickOutside` default.\n\t\tif ( onFocusOutside ) {\n\t\t\tonFocusOutside( event );\n\t\t\treturn;\n\t\t} else if ( ! onClickOutside ) {\n\t\t\tif ( onClose ) {\n\t\t\t\tonClose();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Simulate MouseEvent using FocusEvent#relatedTarget as emulated click\n\t\t// target. MouseEvent constructor is unsupported in Internet Explorer.\n\t\tlet clickEvent;\n\t\ttry {\n\t\t\tclickEvent = new window.MouseEvent( 'click' );\n\t\t} catch ( error ) {\n\t\t\tclickEvent = document.createEvent( 'MouseEvent' );\n\t\t\tclickEvent.initMouseEvent(\n\t\t\t\t'click',\n\t\t\t\ttrue,\n\t\t\t\ttrue,\n\t\t\t\twindow,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\t0,\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tObject.defineProperty( clickEvent, 'target', {\n\t\t\tget: () => event.relatedTarget,\n\t\t} );\n\n\t\tdeprecated( 'Popover onClickOutside prop', {\n\t\t\talternative: 'onFocusOutside',\n\t\t} );\n\n\t\tonClickOutside( clickEvent );\n\t}\n\n\t// Disable reason: We care to capture the _bubbled_ events from inputs\n\t// within popover as inferring close intent.\n\n\tlet content = (\n\t\t<PopoverDetectOutside onFocusOutside={ handleOnFocusOutside }>\n\t\t\t<Animate\n\t\t\t\ttype={ animate && animateOrigin ? 'appear' : null }\n\t\t\t\toptions={ { origin: animateOrigin } }\n\t\t\t>\n\t\t\t\t{ ( { className: animateClassName } ) => (\n\t\t\t\t\t<IsolatedEventContainer\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'components-popover',\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\tanimateClassName,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-expanded': isExpanded,\n\t\t\t\t\t\t\t\t'is-without-arrow': noArrow,\n\t\t\t\t\t\t\t\t'is-alternate': isAlternate,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ...contentProps }\n\t\t\t\t\t\tonKeyDown={ maybeClose }\n\t\t\t\t\t\tref={ containerRef }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isExpanded && <ScrollLock /> }\n\t\t\t\t\t\t{ isExpanded && (\n\t\t\t\t\t\t\t<div className=\"components-popover__header\">\n\t\t\t\t\t\t\t\t<span className=\"components-popover__header-title\">\n\t\t\t\t\t\t\t\t\t{ headerTitle }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"components-popover__close\"\n\t\t\t\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={ contentRef }\n\t\t\t\t\t\t\tclassName=\"components-popover__content\"\n\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div style={ { position: 'relative' } }>\n\t\t\t\t\t\t\t\t{ containerResizeListener }\n\t\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IsolatedEventContainer>\n\t\t\t\t) }\n\t\t\t</Animate>\n\t\t</PopoverDetectOutside>\n\t);\n\n\t// Apply focus to element as long as focusOnMount is truthy; false is\n\t// the only \"disabled\" value.\n\tif ( focusOnMount ) {\n\t\tcontent = <FocusManaged>{ content }</FocusManaged>;\n\t}\n\n\tif ( slot.ref ) {\n\t\tcontent = <Fill name={ __unstableSlotName }>{ content }</Fill>;\n\t}\n\n\tif ( anchorRef || anchorRect ) {\n\t\treturn content;\n\t}\n\n\treturn <span ref={ anchorRefFallback }>{ content }</span>;\n};\n\nconst PopoverContainer = Popover;\n\nPopoverContainer.Slot = ( { name = SLOT_NAME } ) => (\n\t<Slot bubblesVirtually name={ name } className=\"popover-slot\" />\n);\n\nexport default PopoverContainer;\n"]}