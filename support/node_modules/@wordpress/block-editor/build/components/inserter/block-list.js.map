{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/block-list.js"],"names":["createBlocksFromInnerBlocksTemplate","innerBlocksTemplate","name","attributes","innerBlocks","getBlockNamespace","item","split","MAX_SUGGESTED_ITEMS","InserterBlockList","rootClientId","onInsert","onHover","selectBlockOnInsert","__experimentalSelectBlockOnInsert","filterValue","debouncedSpeak","select","getInserterItems","getBlockName","getSettings","getCategories","getCollections","getChildBlockNames","rootBlockName","__experimentalFetchReusableBlocks","categories","collections","rootChildBlocks","items","fetchReusableBlocks","onSelectItem","title","initialAttributes","insertedBlock","message","filteredItems","childItems","suggestedItems","utility","slice","reusableItems","category","itemsPerCategory","getCategoryIndex","slug","itemList","itemsPerCollection","result","Object","keys","forEach","namespace","filter","length","resultCount","reduce","accumulator","currentCategorySlug","resultsFoundMessage","hasItems","hasChildItems","categoryItems","icon","collection","collectionItems","controlsRepeat","post_type","onSelect","fills","withSpokenMessages"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tmap,\n\tincludes,\n\tfilter,\n\tfindIndex,\n\tflow,\n\tsortBy,\n\tgroupBy,\n\tisEmpty,\n} from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, _n, sprintf } from '@wordpress/i18n';\nimport { withSpokenMessages } from '@wordpress/components';\nimport { addQueryArgs } from '@wordpress/url';\nimport { controlsRepeat } from '@wordpress/icons';\nimport { speak } from '@wordpress/a11y';\nimport { createBlock } from '@wordpress/blocks';\nimport { useMemo, useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport ChildBlocks from './child-blocks';\nimport __experimentalInserterMenuExtension from '../inserter-menu-extension';\nimport { searchBlockItems } from './search-items';\nimport InserterPanel from './panel';\nimport InserterNoResults from './no-results';\n\n// Copied over from the Columns block. It seems like it should become part of public API.\nconst createBlocksFromInnerBlocksTemplate = ( innerBlocksTemplate ) => {\n\treturn map(\n\t\tinnerBlocksTemplate,\n\t\t( [ name, attributes, innerBlocks = [] ] ) =>\n\t\t\tcreateBlock(\n\t\t\t\tname,\n\t\t\t\tattributes,\n\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocks )\n\t\t\t)\n\t);\n};\n\nconst getBlockNamespace = ( item ) => item.name.split( '/' )[ 0 ];\n\nconst MAX_SUGGESTED_ITEMS = 9;\n\nfunction InserterBlockList( {\n\trootClientId,\n\tonInsert,\n\tonHover,\n\t__experimentalSelectBlockOnInsert: selectBlockOnInsert,\n\tfilterValue,\n\tdebouncedSpeak,\n} ) {\n\tconst {\n\t\tcategories,\n\t\tcollections,\n\t\titems,\n\t\trootChildBlocks,\n\t\tfetchReusableBlocks,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getInserterItems, getBlockName, getSettings } = select(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\t\t\tconst {\n\t\t\t\tgetCategories,\n\t\t\t\tgetCollections,\n\t\t\t\tgetChildBlockNames,\n\t\t\t} = select( 'core/blocks' );\n\t\t\tconst rootBlockName = getBlockName( rootClientId );\n\t\t\tconst { __experimentalFetchReusableBlocks } = getSettings();\n\n\t\t\treturn {\n\t\t\t\tcategories: getCategories(),\n\t\t\t\tcollections: getCollections(),\n\t\t\t\trootChildBlocks: getChildBlockNames( rootBlockName ),\n\t\t\t\titems: getInserterItems( rootClientId ),\n\t\t\t\tfetchReusableBlocks: __experimentalFetchReusableBlocks,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\t// Fetch resuable blocks on mount\n\tuseEffect( () => {\n\t\tif ( fetchReusableBlocks ) {\n\t\t\tfetchReusableBlocks();\n\t\t}\n\t}, [] );\n\n\tconst onSelectItem = ( item ) => {\n\t\tconst { name, title, initialAttributes, innerBlocks } = item;\n\t\tconst insertedBlock = createBlock(\n\t\t\tname,\n\t\t\tinitialAttributes,\n\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocks )\n\t\t);\n\n\t\tonInsert( insertedBlock );\n\n\t\tif ( ! selectBlockOnInsert ) {\n\t\t\t// translators: %s: the name of the block that has been added\n\t\t\tconst message = sprintf( __( '%s block added' ), title );\n\t\t\tspeak( message );\n\t\t}\n\t};\n\n\tconst filteredItems = useMemo( () => {\n\t\treturn searchBlockItems( items, categories, collections, filterValue );\n\t}, [ filterValue, items, categories, collections ] );\n\n\tconst childItems = useMemo( () => {\n\t\treturn filter( filteredItems, ( { name } ) =>\n\t\t\tincludes( rootChildBlocks, name )\n\t\t);\n\t}, [ filteredItems, rootChildBlocks ] );\n\n\tconst suggestedItems = useMemo( () => {\n\t\treturn filter( items, ( item ) => item.utility > 0 ).slice(\n\t\t\t0,\n\t\t\tMAX_SUGGESTED_ITEMS\n\t\t);\n\t}, [ items ] );\n\n\tconst reusableItems = useMemo( () => {\n\t\treturn filter( filteredItems, { category: 'reusable' } );\n\t}, [ filteredItems ] );\n\n\tconst itemsPerCategory = useMemo( () => {\n\t\tconst getCategoryIndex = ( item ) => {\n\t\t\treturn findIndex(\n\t\t\t\tcategories,\n\t\t\t\t( category ) => category.slug === item.category\n\t\t\t);\n\t\t};\n\n\t\treturn flow(\n\t\t\t( itemList ) =>\n\t\t\t\tfilter( itemList, ( item ) => item.category !== 'reusable' ),\n\t\t\t( itemList ) => sortBy( itemList, getCategoryIndex ),\n\t\t\t( itemList ) => groupBy( itemList, 'category' )\n\t\t)( filteredItems );\n\t}, [ filteredItems, categories ] );\n\n\tconst itemsPerCollection = useMemo( () => {\n\t\t// Create a new Object to avoid mutating collection\n\t\tconst result = { ...collections };\n\t\tObject.keys( collections ).forEach( ( namespace ) => {\n\t\t\tresult[ namespace ] = filteredItems.filter(\n\t\t\t\t( item ) => getBlockNamespace( item ) === namespace\n\t\t\t);\n\t\t\tif ( result[ namespace ].length === 0 ) {\n\t\t\t\tdelete result[ namespace ];\n\t\t\t}\n\t\t} );\n\n\t\treturn result;\n\t}, [ filteredItems, collections ] );\n\n\t// Announce search results on change\n\tuseEffect( () => {\n\t\tconst resultCount = Object.keys( itemsPerCategory ).reduce(\n\t\t\t( accumulator, currentCategorySlug ) => {\n\t\t\t\treturn (\n\t\t\t\t\taccumulator + itemsPerCategory[ currentCategorySlug ].length\n\t\t\t\t);\n\t\t\t},\n\t\t\t0\n\t\t);\n\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', resultCount ),\n\t\t\tresultCount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ itemsPerCategory, debouncedSpeak ] );\n\n\tconst hasItems = ! isEmpty( filteredItems );\n\tconst hasChildItems = childItems.length > 0;\n\n\treturn (\n\t\t<div>\n\t\t\t<ChildBlocks\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\titems={ childItems }\n\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\tonHover={ onHover }\n\t\t\t/>\n\n\t\t\t{ ! hasChildItems && !! suggestedItems.length && ! filterValue && (\n\t\t\t\t<InserterPanel title={ _x( 'Most used', 'blocks' ) }>\n\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\titems={ suggestedItems }\n\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t/>\n\t\t\t\t</InserterPanel>\n\t\t\t) }\n\n\t\t\t{ ! hasChildItems &&\n\t\t\t\tmap( categories, ( category ) => {\n\t\t\t\t\tconst categoryItems = itemsPerCategory[ category.slug ];\n\t\t\t\t\tif ( ! categoryItems || ! categoryItems.length ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<InserterPanel\n\t\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\t\ticon={ category.icon }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\t\titems={ categoryItems }\n\t\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</InserterPanel>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\n\t\t\t{ ! hasChildItems &&\n\t\t\t\tmap( collections, ( collection, namespace ) => {\n\t\t\t\t\tconst collectionItems = itemsPerCollection[ namespace ];\n\t\t\t\t\tif ( ! collectionItems || ! collectionItems.length ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<InserterPanel\n\t\t\t\t\t\t\tkey={ namespace }\n\t\t\t\t\t\t\ttitle={ collection.title }\n\t\t\t\t\t\t\ticon={ collection.icon }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\t\titems={ collectionItems }\n\t\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</InserterPanel>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\n\t\t\t{ ! hasChildItems && !! reusableItems.length && (\n\t\t\t\t<InserterPanel\n\t\t\t\t\tclassName=\"block-editor-inserter__reusable-blocks-panel\"\n\t\t\t\t\ttitle={ __( 'Reusable' ) }\n\t\t\t\t\ticon={ controlsRepeat }\n\t\t\t\t>\n\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\titems={ reusableItems }\n\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t/>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"block-editor-inserter__manage-reusable-blocks\"\n\t\t\t\t\t\thref={ addQueryArgs( 'edit.php', {\n\t\t\t\t\t\t\tpost_type: 'wp_block',\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Manage all reusable blocks' ) }\n\t\t\t\t\t</a>\n\t\t\t\t</InserterPanel>\n\t\t\t) }\n\n\t\t\t<__experimentalInserterMenuExtension.Slot\n\t\t\t\tfillProps={ {\n\t\t\t\t\tonSelect: onSelectItem,\n\t\t\t\t\tonHover,\n\t\t\t\t\tfilterValue,\n\t\t\t\t\thasItems,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ ( fills ) => {\n\t\t\t\t\tif ( fills.length ) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<InserterPanel title={ __( 'Search Results' ) }>\n\t\t\t\t\t\t\t\t{ fills }\n\t\t\t\t\t\t\t</InserterPanel>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif ( ! hasItems ) {\n\t\t\t\t\t\treturn <InserterNoResults />;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} }\n\t\t\t</__experimentalInserterMenuExtension.Slot>\n\t\t</div>\n\t);\n}\n\nexport default compose( withSpokenMessages )( InserterBlockList );\n"]}