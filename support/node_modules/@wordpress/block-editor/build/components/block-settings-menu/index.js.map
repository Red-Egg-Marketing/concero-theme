{"version":3,"sources":["@wordpress/block-editor/src/components/block-settings-menu/index.js"],"names":["POPOVER_PROPS","className","position","isAlternate","BlockSettingsMenu","clientIds","blockClientIds","count","length","firstBlockClientId","shortcuts","select","getShortcutRepresentation","duplicate","remove","insertAfter","insertBefore","hasCopied","setHasCopied","canDuplicate","canInsertDefaultBlock","isLocked","onDuplicate","onInsertAfter","onInsertBefore","onRemove","blocks","toggleProps","moreHorizontal","onClose"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { castArray, flow } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _n } from '@wordpress/i18n';\nimport {\n\tToolbarGroup,\n\t__experimentalToolbarItem as ToolbarItem,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n\tClipboardButton,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { moreHorizontal } from '@wordpress/icons';\nimport { useState } from '@wordpress/element';\nimport { serialize } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockActions from '../block-actions';\nimport BlockModeToggle from './block-mode-toggle';\nimport BlockHTMLConvertButton from './block-html-convert-button';\nimport BlockUnknownConvertButton from './block-unknown-convert-button';\nimport __experimentalBlockSettingsMenuFirstItem from './block-settings-menu-first-item';\nimport BlockSettingsMenuControls from '../block-settings-menu-controls';\n\nconst POPOVER_PROPS = {\n\tclassName: 'block-editor-block-settings-menu__popover',\n\tposition: 'bottom right',\n\tisAlternate: true,\n};\n\nexport function BlockSettingsMenu( { clientIds } ) {\n\tconst blockClientIds = castArray( clientIds );\n\tconst count = blockClientIds.length;\n\tconst firstBlockClientId = blockClientIds[ 0 ];\n\n\tconst shortcuts = useSelect( ( select ) => {\n\t\tconst { getShortcutRepresentation } = select(\n\t\t\t'core/keyboard-shortcuts'\n\t\t);\n\t\treturn {\n\t\t\tduplicate: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/duplicate'\n\t\t\t),\n\t\t\tremove: getShortcutRepresentation( 'core/block-editor/remove' ),\n\t\t\tinsertAfter: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-after'\n\t\t\t),\n\t\t\tinsertBefore: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-before'\n\t\t\t),\n\t\t};\n\t}, [] );\n\n\tconst [ hasCopied, setHasCopied ] = useState();\n\n\treturn (\n\t\t<BlockActions clientIds={ clientIds }>\n\t\t\t{ ( {\n\t\t\t\tcanDuplicate,\n\t\t\t\tcanInsertDefaultBlock,\n\t\t\t\tisLocked,\n\t\t\t\tonDuplicate,\n\t\t\t\tonInsertAfter,\n\t\t\t\tonInsertBefore,\n\t\t\t\tonRemove,\n\t\t\t\tblocks,\n\t\t\t} ) => (\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\ticon={ moreHorizontal }\n\t\t\t\t\t\t\t\tlabel={ __( 'More options' ) }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-settings-menu\"\n\t\t\t\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\t\t\t\ttoggleProps={ toggleProps }\n\t\t\t\t\t\t\t\tnoIcons\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t\t<__experimentalBlockSettingsMenuFirstItem.Slot\n\t\t\t\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<BlockUnknownConvertButton\n\t\t\t\t\t\t\t\t\t\t\t\t\tclientId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirstBlockClientId\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\n\t\t\t\t\t\t\t\t\t\t\t\t\tclientId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirstBlockClientId\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t<ClipboardButton\n\t\t\t\t\t\t\t\t\t\t\t\ttext={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tserialize( blocks )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"components-menu-item__button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonCopy={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetHasCopied( true );\n\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\tonFinishCopy={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetHasCopied( false )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ hasCopied\n\t\t\t\t\t\t\t\t\t\t\t\t\t? __( 'Copied!' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t: __( 'Copy' ) }\n\t\t\t\t\t\t\t\t\t\t\t</ClipboardButton>\n\t\t\t\t\t\t\t\t\t\t\t{ canDuplicate && (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDuplicate\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.duplicate\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t{ canInsertDefaultBlock && (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInsertBefore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.insertBefore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Insert Before'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInsertAfter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.insertAfter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Insert After' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<BlockModeToggle\n\t\t\t\t\t\t\t\t\t\t\t\t\tclientId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirstBlockClientId\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonToggle={ onClose }\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t\t<BlockSettingsMenuControls.Slot\n\t\t\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t\t{ ! isLocked && (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRemove\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.remove\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ _n(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Remove Block',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Remove Blocks',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t</ToolbarGroup>\n\t\t\t) }\n\t\t</BlockActions>\n\t);\n}\n\nexport default BlockSettingsMenu;\n"]}