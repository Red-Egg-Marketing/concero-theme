{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/block-patterns.js"],"names":["map","useMemo","useCallback","parse","cloneBlock","useDispatch","ENTER","SPACE","__","sprintf","_x","BlockPreview","useAsyncList","InserterPanel","searchItems","InserterNoResults","BlockPattern","pattern","onClick","content","blocks","event","keyCode","title","BlockPatternPlaceholder","BlockPatterns","patterns","onInsert","filterValue","filteredPatterns","currentShownPatterns","createSuccessNotice","onClickPattern","block","type","length","index","name"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { map } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, useCallback } from '@wordpress/element';\nimport { parse, cloneBlock } from '@wordpress/blocks';\nimport { useDispatch } from '@wordpress/data';\nimport { ENTER, SPACE } from '@wordpress/keycodes';\nimport { __, sprintf, _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport useAsyncList from './use-async-list';\nimport InserterPanel from './panel';\nimport { searchItems } from './search-items';\nimport InserterNoResults from './no-results';\n\nfunction BlockPattern( { pattern, onClick } ) {\n\tconst { content } = pattern;\n\tconst blocks = useMemo( () => parse( content ), [ content ] );\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-inserter__patterns-item\"\n\t\t\trole=\"button\"\n\t\t\tonClick={ () => onClick( pattern, blocks ) }\n\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\tif ( ENTER === event.keyCode || SPACE === event.keyCode ) {\n\t\t\t\t\tonClick( pattern, blocks );\n\t\t\t\t}\n\t\t\t} }\n\t\t\ttabIndex={ 0 }\n\t\t\taria-label={ pattern.title }\n\t\t>\n\t\t\t<BlockPreview blocks={ blocks } />\n\t\t\t<div className=\"block-editor-inserter__patterns-item-title\">\n\t\t\t\t{ pattern.title }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternPlaceholder() {\n\treturn (\n\t\t<div className=\"block-editor-inserter__patterns-item is-placeholder\" />\n\t);\n}\n\nfunction BlockPatterns( { patterns, onInsert, filterValue } ) {\n\tconst filteredPatterns = useMemo(\n\t\t() => searchItems( patterns, filterValue ),\n\t\t[ filterValue, patterns ]\n\t);\n\tconst currentShownPatterns = useAsyncList( filteredPatterns );\n\tconst { createSuccessNotice } = useDispatch( 'core/notices' );\n\tconst onClickPattern = useCallback( ( pattern, blocks ) => {\n\t\tonInsert( map( blocks, ( block ) => cloneBlock( block ) ) );\n\t\tcreateSuccessNotice(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: block pattern title. */\n\t\t\t\t__( 'Pattern \"%s\" inserted.' ),\n\t\t\t\tpattern.title\n\t\t\t),\n\t\t\t{\n\t\t\t\ttype: 'snackbar',\n\t\t\t}\n\t\t);\n\t}, [] );\n\n\treturn !! filteredPatterns.length ? (\n\t\t<InserterPanel\n\t\t\ttitle={\n\t\t\t\tfilterValue\n\t\t\t\t\t? __( 'Search Results' )\n\t\t\t\t\t: _x( 'All', 'patterns categories' )\n\t\t\t}\n\t\t>\n\t\t\t{ filteredPatterns.map( ( pattern, index ) =>\n\t\t\t\tcurrentShownPatterns[ index ] === pattern ? (\n\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\tonClick={ onClickPattern }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<BlockPatternPlaceholder key={ pattern.name } />\n\t\t\t\t)\n\t\t\t) }\n\t\t</InserterPanel>\n\t) : (\n\t\t<InserterNoResults />\n\t);\n}\n\nexport default BlockPatterns;\n"]}