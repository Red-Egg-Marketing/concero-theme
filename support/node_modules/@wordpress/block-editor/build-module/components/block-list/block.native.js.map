{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block.native.js"],"names":["View","Text","TouchableWithoutFeedback","Component","GlobalStylesContext","withDispatch","withSelect","compose","withPreferredColorScheme","getBlockType","__experimentalGetAccessibleBlockLabel","getAccessibleBlockLabel","styles","BlockEdit","BlockInvalidWarning","BlockMobileToolbar","BlockListBlock","arguments","insertBlocksAfter","bind","onFocus","props","firstToSelectId","isSelected","onSelect","blocks","onInsertBlocks","order","clientId","globalStyle","mergedStyle","wrapperProps","style","name","attributes","onChange","onReplace","mergeBlocks","onCaretVerticalPositionChange","parentWidth","contentStyle","onDeleteBlock","blockTitle","blockType","icon","isValid","title","isDimmed","isTouchable","isStackedHorizontally","isParentSelected","getStylesFromColorScheme","marginVertical","marginHorizontal","isInnerBlockSelected","accessibilityLabel","accessible","flex","dimmed","solidBorder","solidBorderColor","solidBorderColorDark","dashedBorder","dashedBorderColor","dashedBorderColorDark","getBlockForType","neutralToolbar","select","rootClientId","getBlockIndex","isBlockSelected","__unstableGetBlockWithoutInnerBlocks","getBlockHierarchyRootClientId","getSelectedBlockClientId","getBlockRootClientId","getLowestCommonAncestorWithSelectedBlock","getBlockParents","hasSelectedInnerBlock","block","parents","parentId","rootBlockId","selectedBlockClientId","commonAncestor","commonAncestorIndex","indexOf","length","isAncestorSelected","includes","isSelectedBlockNested","selectedParents","isDescendantSelected","isDescendantOfParentSelected","getEditWrapperProps","dispatch","ownProps","insertBlocks","replaceBlocks","selectBlock","updateBlockAttributes","forward","getPreviousBlockClientId","getNextBlockClientId","nextBlockClientId","previousBlockClientId","index","initialPosition","indexToSelect"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { GlobalStylesContext } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport {\n\tgetBlockType,\n\t__experimentalGetAccessibleBlockLabel as getAccessibleBlockLabel,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport styles from './block.scss';\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockMobileToolbar from '../block-mobile-toolbar';\n\nclass BlockListBlock extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.insertBlocksAfter = this.insertBlocksAfter.bind( this );\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t}\n\n\tonFocus() {\n\t\tconst { firstToSelectId, isSelected, onSelect } = this.props;\n\t\tif ( ! isSelected ) {\n\t\t\tonSelect( firstToSelectId );\n\t\t}\n\t}\n\n\tinsertBlocksAfter( blocks ) {\n\t\tthis.props.onInsertBlocks( blocks, this.props.order + 1 );\n\n\t\tif ( blocks[ 0 ] ) {\n\t\t\t// focus on the first block inserted\n\t\t\tthis.props.onSelect( blocks[ 0 ].clientId );\n\t\t}\n\t}\n\n\tgetBlockForType() {\n\t\treturn (\n\t\t\t<GlobalStylesContext.Consumer>\n\t\t\t\t{ ( globalStyle ) => {\n\t\t\t\t\tconst mergedStyle = {\n\t\t\t\t\t\t...globalStyle,\n\t\t\t\t\t\t...this.props.wrapperProps.style,\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<GlobalStylesContext.Provider value={ mergedStyle }>\n\t\t\t\t\t\t\t<BlockEdit\n\t\t\t\t\t\t\t\tname={ this.props.name }\n\t\t\t\t\t\t\t\tisSelected={ this.props.isSelected }\n\t\t\t\t\t\t\t\tattributes={ this.props.attributes }\n\t\t\t\t\t\t\t\tsetAttributes={ this.props.onChange }\n\t\t\t\t\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\t\t\t\t\tonReplace={ this.props.onReplace }\n\t\t\t\t\t\t\t\tinsertBlocksAfter={ this.insertBlocksAfter }\n\t\t\t\t\t\t\t\tmergeBlocks={ this.props.mergeBlocks }\n\t\t\t\t\t\t\t\tonCaretVerticalPositionChange={\n\t\t\t\t\t\t\t\t\tthis.props.onCaretVerticalPositionChange\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Block level styles\n\t\t\t\t\t\t\t\twrapperProps={ this.props.wrapperProps }\n\t\t\t\t\t\t\t\t// inherited styles merged with block level styles\n\t\t\t\t\t\t\t\tmergedStyle={ mergedStyle }\n\t\t\t\t\t\t\t\tclientId={ this.props.clientId }\n\t\t\t\t\t\t\t\tparentWidth={ this.props.parentWidth }\n\t\t\t\t\t\t\t\tcontentStyle={ this.props.contentStyle }\n\t\t\t\t\t\t\t\tonDeleteBlock={ this.props.onDeleteBlock }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GlobalStylesContext.Provider>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</GlobalStylesContext.Consumer>\n\t\t);\n\t}\n\n\trenderBlockTitle() {\n\t\treturn (\n\t\t\t<View style={ styles.blockTitle }>\n\t\t\t\t<Text>BlockType: { this.props.name }</Text>\n\t\t\t</View>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tblockType,\n\t\t\tclientId,\n\t\t\ticon,\n\t\t\tisSelected,\n\t\t\tisValid,\n\t\t\torder,\n\t\t\ttitle,\n\t\t\tisDimmed,\n\t\t\tisTouchable,\n\t\t\tonDeleteBlock,\n\t\t\tisStackedHorizontally,\n\t\t\tisParentSelected,\n\t\t\tgetStylesFromColorScheme,\n\t\t\tmarginVertical,\n\t\t\tmarginHorizontal,\n\t\t\tisInnerBlockSelected,\n\t\t} = this.props;\n\n\t\tconst accessibilityLabel = getAccessibleBlockLabel(\n\t\t\tblockType,\n\t\t\tattributes,\n\t\t\torder + 1\n\t\t);\n\n\t\tconst accessible = ! ( isSelected || isInnerBlockSelected );\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ this.onFocus }\n\t\t\t\taccessible={ accessible }\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t>\n\t\t\t\t<View\n\t\t\t\t\tstyle={ { flex: 1 } }\n\t\t\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\t\t>\n\t\t\t\t\t<View\n\t\t\t\t\t\tpointerEvents={ isTouchable ? 'auto' : 'box-only' }\n\t\t\t\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t{ marginVertical, marginHorizontal, flex: 1 },\n\t\t\t\t\t\t\tisDimmed && styles.dimmed,\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\tstyles.solidBorder,\n\t\t\t\t\t\t\t\t\tgetStylesFromColorScheme(\n\t\t\t\t\t\t\t\t\t\tstyles.solidBorderColor,\n\t\t\t\t\t\t\t\t\t\tstyles.solidBorderColorDark\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ isParentSelected && (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\tstyles.dashedBorder,\n\t\t\t\t\t\t\t\t\tgetStylesFromColorScheme(\n\t\t\t\t\t\t\t\t\t\tstyles.dashedBorderColor,\n\t\t\t\t\t\t\t\t\t\tstyles.dashedBorderColorDark\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ isValid ? (\n\t\t\t\t\t\t\tthis.getBlockForType()\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<BlockInvalidWarning\n\t\t\t\t\t\t\t\tblockTitle={ title }\n\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<View style={ styles.neutralToolbar }>\n\t\t\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t\t\t<BlockMobileToolbar\n\t\t\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\t\t\tonDelete={ onDeleteBlock }\n\t\t\t\t\t\t\t\t\tisStackedHorizontally={\n\t\t\t\t\t\t\t\t\t\tisStackedHorizontally\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId, rootClientId } ) => {\n\t\tconst {\n\t\t\tgetBlockIndex,\n\t\t\tisBlockSelected,\n\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\tgetBlockHierarchyRootClientId,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetLowestCommonAncestorWithSelectedBlock,\n\t\t\tgetBlockParents,\n\t\t\thasSelectedInnerBlock,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst order = getBlockIndex( clientId, rootClientId );\n\t\tconst isSelected = isBlockSelected( clientId );\n\t\tconst isInnerBlockSelected = hasSelectedInnerBlock( clientId );\n\t\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\t\tconst { name, attributes, isValid } = block || {};\n\n\t\tconst blockType = getBlockType( name || 'core/missing' );\n\t\tconst title = blockType.title;\n\t\tconst icon = blockType.icon;\n\n\t\tconst parents = getBlockParents( clientId, true );\n\t\tconst parentId = parents[ 0 ] || '';\n\n\t\tconst rootBlockId = getBlockHierarchyRootClientId( clientId );\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\n\t\tconst commonAncestor = getLowestCommonAncestorWithSelectedBlock(\n\t\t\tclientId\n\t\t);\n\t\tconst commonAncestorIndex = parents.indexOf( commonAncestor ) - 1;\n\t\tconst firstToSelectId = commonAncestor\n\t\t\t? parents[ commonAncestorIndex ]\n\t\t\t: parents[ parents.length - 1 ];\n\n\t\tconst isParentSelected =\n\t\t\tselectedBlockClientId && selectedBlockClientId === parentId;\n\t\tconst isAncestorSelected =\n\t\t\tselectedBlockClientId && parents.includes( selectedBlockClientId );\n\t\tconst isSelectedBlockNested = !! getBlockRootClientId(\n\t\t\tselectedBlockClientId\n\t\t);\n\n\t\tconst selectedParents = selectedBlockClientId\n\t\t\t? getBlockParents( selectedBlockClientId )\n\t\t\t: [];\n\t\tconst isDescendantSelected = selectedParents.includes( clientId );\n\t\tconst isDescendantOfParentSelected = selectedParents.includes(\n\t\t\tparentId\n\t\t);\n\t\tconst isTouchable =\n\t\t\tisSelected ||\n\t\t\tisDescendantOfParentSelected ||\n\t\t\tisParentSelected ||\n\t\t\tparentId === '';\n\t\tconst isDimmed =\n\t\t\t! isSelected &&\n\t\t\tisSelectedBlockNested &&\n\t\t\t! isAncestorSelected &&\n\t\t\t! isDescendantSelected &&\n\t\t\t( isDescendantOfParentSelected || rootBlockId === clientId );\n\n\t\treturn {\n\t\t\ticon,\n\t\t\tname: name || 'core/missing',\n\t\t\torder,\n\t\t\ttitle,\n\t\t\tattributes,\n\t\t\tblockType,\n\t\t\tisSelected,\n\t\t\tisInnerBlockSelected,\n\t\t\tisValid,\n\t\t\tisParentSelected,\n\t\t\tfirstToSelectId,\n\t\t\tisAncestorSelected,\n\t\t\tisTouchable,\n\t\t\tisDimmed,\n\t\t\twrapperProps: blockType.getEditWrapperProps\n\t\t\t\t? blockType.getEditWrapperProps( attributes ) || {}\n\t\t\t\t: {},\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\n\t\tconst {\n\t\t\tinsertBlocks,\n\t\t\tmergeBlocks,\n\t\t\treplaceBlocks,\n\t\t\tselectBlock,\n\t\t\tupdateBlockAttributes,\n\t\t} = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tmergeBlocks( forward ) {\n\t\t\t\tconst { clientId } = ownProps;\n\t\t\t\tconst {\n\t\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\t\tgetNextBlockClientId,\n\t\t\t\t} = select( 'core/block-editor' );\n\n\t\t\t\tif ( forward ) {\n\t\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\t\t\t\t\tif ( nextBlockClientId ) {\n\t\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst previousBlockClientId = getPreviousBlockClientId(\n\t\t\t\t\t\tclientId\n\t\t\t\t\t);\n\t\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonInsertBlocks( blocks, index ) {\n\t\t\t\tinsertBlocks( blocks, index, ownProps.rootClientId );\n\t\t\t},\n\t\t\tonSelect( clientId = ownProps.clientId, initialPosition ) {\n\t\t\t\tselectBlock( clientId, initialPosition );\n\t\t\t},\n\t\t\tonChange: ( attributes ) => {\n\t\t\t\tupdateBlockAttributes( ownProps.clientId, attributes );\n\t\t\t},\n\t\t\tonReplace( blocks, indexToSelect ) {\n\t\t\t\treplaceBlocks( [ ownProps.clientId ], blocks, indexToSelect );\n\t\t\t},\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( BlockListBlock );\n"]}