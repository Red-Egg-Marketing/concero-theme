{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/index.native.js"],"names":["identity","View","Platform","TouchableWithoutFeedback","Component","createContext","withDispatch","withSelect","compose","withPreferredColorScheme","createBlock","KeyboardAwareFlatList","ReadableContentView","__","styles","BlockListBlock","BlockListAppender","BlockInsertionPoint","BlockListContext","BlockList","arguments","renderItem","bind","renderBlockListFooter","renderDefaultBlockAppender","onCaretVerticalPositionChange","scrollViewInnerRef","addBlockToEndOfPost","shouldFlatListPreventAutomaticScroll","shouldShowInnerBlockAppender","newBlock","props","insertBlock","blockCount","targetId","caretY","previousCaretY","handleCaretVerticalPositionChange","scrollViewRef","ref","isBlockInsertionPointVisible","shouldShowInsertionPointBefore","willShowInsertionPoint","defaultAppender","rootClientId","renderAppender","blockClientIds","length","isRootList","renderList","parentScrollRef","extraProps","clearSelectedBlock","title","header","isReadOnly","horizontal","shouldShowInsertionPointAfter","marginVertical","defaultBlock","marginTop","marginHorizontal","marginLeft","isFloatingToolbarVisible","isStackedHorizontally","horizontalAlignment","blockToolbar","blockBorder","headerToolbar","floatingToolbar","forceRefresh","containerStyle","flex","OS","removeClippedSubviews","autoScroll","height","width","overflowVisible","horizontalContentContainer","innerAppender","clientId","item","contentResizeMode","contentStyle","onAddBlock","onDeleteBlock","readableContentViewStyle","parentWidth","paragraphBlock","withFooter","renderFooterAppender","blockListFooter","select","__experimentalMoverDirection","getBlockCount","getBlockOrder","getSelectedBlockClientId","getBlockInsertionPoint","getSettings","getBlockHierarchyRootClientId","selectedBlockClientId","insertionPoint","blockInsertionPointIsVisible","index","readOnly","rootBlockId","hasRootInnerBlocks","undefined","dispatch","replaceBlock"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { identity } from 'lodash';\nimport { View, Platform, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component, createContext } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tKeyboardAwareFlatList,\n\tReadableContentView,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport BlockListBlock from './block';\nimport BlockListAppender from '../block-list-appender';\nimport BlockInsertionPoint from './insertion-point';\n\nconst BlockListContext = createContext();\n\nexport class BlockList extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.renderItem = this.renderItem.bind( this );\n\t\tthis.renderBlockListFooter = this.renderBlockListFooter.bind( this );\n\t\tthis.renderDefaultBlockAppender = this.renderDefaultBlockAppender.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onCaretVerticalPositionChange = this.onCaretVerticalPositionChange.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.scrollViewInnerRef = this.scrollViewInnerRef.bind( this );\n\t\tthis.addBlockToEndOfPost = this.addBlockToEndOfPost.bind( this );\n\t\tthis.shouldFlatListPreventAutomaticScroll = this.shouldFlatListPreventAutomaticScroll.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.shouldShowInnerBlockAppender = this.shouldShowInnerBlockAppender.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\taddBlockToEndOfPost( newBlock ) {\n\t\tthis.props.insertBlock( newBlock, this.props.blockCount );\n\t}\n\n\tonCaretVerticalPositionChange( targetId, caretY, previousCaretY ) {\n\t\tKeyboardAwareFlatList.handleCaretVerticalPositionChange(\n\t\t\tthis.scrollViewRef,\n\t\t\ttargetId,\n\t\t\tcaretY,\n\t\t\tpreviousCaretY\n\t\t);\n\t}\n\n\tscrollViewInnerRef( ref ) {\n\t\tthis.scrollViewRef = ref;\n\t}\n\n\tshouldFlatListPreventAutomaticScroll() {\n\t\treturn this.props.isBlockInsertionPointVisible;\n\t}\n\n\trenderDefaultBlockAppender() {\n\t\tconst { shouldShowInsertionPointBefore } = this.props;\n\t\tconst willShowInsertionPoint = shouldShowInsertionPointBefore(); // call without the client_id argument since this is the appender\n\t\treturn (\n\t\t\t<View style={ styles.defaultAppender }>\n\t\t\t\t<ReadableContentView>\n\t\t\t\t\t<BlockListAppender // show the default appender, anormal, when not inserting a block\n\t\t\t\t\t\trootClientId={ this.props.rootClientId }\n\t\t\t\t\t\trenderAppender={ this.props.renderAppender }\n\t\t\t\t\t\tshowSeparator={ willShowInsertionPoint }\n\t\t\t\t\t/>\n\t\t\t\t</ReadableContentView>\n\t\t\t</View>\n\t\t);\n\t}\n\n\tshouldShowInnerBlockAppender() {\n\t\tconst { blockClientIds, renderAppender } = this.props;\n\n\t\treturn renderAppender && blockClientIds.length > 0;\n\t}\n\n\trender() {\n\t\tconst { isRootList } = this.props;\n\n\t\t// Use of Context to propagate the main scroll ref to its children e.g InnerBlocks\n\t\treturn isRootList ? (\n\t\t\t<BlockListContext.Provider value={ this.scrollViewRef }>\n\t\t\t\t{ this.renderList() }\n\t\t\t</BlockListContext.Provider>\n\t\t) : (\n\t\t\t<BlockListContext.Consumer>\n\t\t\t\t{ ( ref ) =>\n\t\t\t\t\tthis.renderList( {\n\t\t\t\t\t\tparentScrollRef: ref,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t</BlockListContext.Consumer>\n\t\t);\n\t}\n\n\trenderList( extraProps = {} ) {\n\t\tconst {\n\t\t\tclearSelectedBlock,\n\t\t\tblockClientIds,\n\t\t\ttitle,\n\t\t\theader,\n\t\t\tisReadOnly,\n\t\t\tisRootList,\n\t\t\thorizontal,\n\t\t\tshouldShowInsertionPointBefore,\n\t\t\tshouldShowInsertionPointAfter,\n\t\t\tmarginVertical = styles.defaultBlock.marginTop,\n\t\t\tmarginHorizontal = styles.defaultBlock.marginLeft,\n\t\t\tisFloatingToolbarVisible,\n\t\t\tisStackedHorizontally,\n\t\t\thorizontalAlignment,\n\t\t} = this.props;\n\t\tconst { parentScrollRef } = extraProps;\n\n\t\tconst {\n\t\t\tblockToolbar,\n\t\t\tblockBorder,\n\t\t\theaderToolbar,\n\t\t\tfloatingToolbar,\n\t\t} = styles;\n\n\t\tconst forceRefresh =\n\t\t\tshouldShowInsertionPointBefore || shouldShowInsertionPointAfter;\n\n\t\tconst containerStyle = {\n\t\t\tflex: isRootList ? 1 : 0,\n\t\t\t// We set negative margin in the parent to remove the edge spacing between parent block and child block in ineer blocks\n\t\t\tmarginVertical: isRootList ? 0 : -marginVertical,\n\t\t\tmarginHorizontal: isRootList ? 0 : -marginHorizontal,\n\t\t};\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ containerStyle }\n\t\t\t\tonAccessibilityEscape={ clearSelectedBlock }\n\t\t\t>\n\t\t\t\t<KeyboardAwareFlatList\n\t\t\t\t\t{ ...( Platform.OS === 'android'\n\t\t\t\t\t\t? { removeClippedSubviews: false }\n\t\t\t\t\t\t: {} ) } // Disable clipping on Android to fix focus losing. See https://github.com/wordpress-mobile/gutenberg-mobile/pull/741#issuecomment-472746541\n\t\t\t\t\taccessibilityLabel=\"block-list\"\n\t\t\t\t\tautoScroll={ this.props.autoScroll }\n\t\t\t\t\tinnerRef={ ( ref ) => {\n\t\t\t\t\t\tthis.scrollViewInnerRef( parentScrollRef || ref );\n\t\t\t\t\t} }\n\t\t\t\t\textraScrollHeight={\n\t\t\t\t\t\tblockToolbar.height + blockBorder.width\n\t\t\t\t\t}\n\t\t\t\t\tinputAccessoryViewHeight={\n\t\t\t\t\t\theaderToolbar.height +\n\t\t\t\t\t\t( isFloatingToolbarVisible\n\t\t\t\t\t\t\t? floatingToolbar.height\n\t\t\t\t\t\t\t: 0 )\n\t\t\t\t\t}\n\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\t\tscrollViewStyle={ [\n\t\t\t\t\t\t{ flex: isRootList ? 1 : 0 },\n\t\t\t\t\t\t! isRootList && styles.overflowVisible,\n\t\t\t\t\t] }\n\t\t\t\t\thorizontal={ horizontal }\n\t\t\t\t\tscrollEnabled={ isRootList }\n\t\t\t\t\tcontentContainerStyle={\n\t\t\t\t\t\thorizontal && styles.horizontalContentContainer\n\t\t\t\t\t}\n\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t! isRootList && styles.overflowVisible,\n\t\t\t\t\t\tisStackedHorizontally && styles.horizontal,\n\t\t\t\t\t\thorizontalAlignment &&\n\t\t\t\t\t\t\tstyles[ `is-aligned-${ horizontalAlignment }` ],\n\t\t\t\t\t] }\n\t\t\t\t\tdata={ blockClientIds }\n\t\t\t\t\tkeyExtractor={ identity }\n\t\t\t\t\textraData={ forceRefresh }\n\t\t\t\t\trenderItem={ this.renderItem }\n\t\t\t\t\tshouldPreventAutomaticScroll={\n\t\t\t\t\t\tthis.shouldFlatListPreventAutomaticScroll\n\t\t\t\t\t}\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tListHeaderComponent={ header }\n\t\t\t\t\tListEmptyComponent={\n\t\t\t\t\t\t! isReadOnly && this.renderDefaultBlockAppender\n\t\t\t\t\t}\n\t\t\t\t\tListFooterComponent={ this.renderBlockListFooter }\n\t\t\t\t/>\n\n\t\t\t\t{ this.shouldShowInnerBlockAppender() && (\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tmarginHorizontal:\n\t\t\t\t\t\t\t\tmarginHorizontal -\n\t\t\t\t\t\t\t\tstyles.innerAppender.marginLeft,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockListAppender\n\t\t\t\t\t\t\trootClientId={ this.props.rootClientId }\n\t\t\t\t\t\t\trenderAppender={ this.props.renderAppender }\n\t\t\t\t\t\t\tshowSeparator\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t);\n\t}\n\n\trenderItem( { item: clientId } ) {\n\t\tconst {\n\t\t\tisReadOnly,\n\t\t\tshouldShowInsertionPointBefore,\n\t\t\tshouldShowInsertionPointAfter,\n\t\t\tmarginVertical = styles.defaultBlock.marginTop,\n\t\t\tmarginHorizontal = styles.defaultBlock.marginLeft,\n\t\t\tisStackedHorizontally,\n\t\t\tcontentResizeMode,\n\t\t\tcontentStyle,\n\t\t\tonAddBlock,\n\t\t\tonDeleteBlock,\n\t\t} = this.props;\n\n\t\tconst readableContentViewStyle = contentResizeMode === 'stretch' && {\n\t\t\tflex: 1,\n\t\t};\n\n\t\treturn (\n\t\t\t<ReadableContentView style={ readableContentViewStyle }>\n\t\t\t\t<View\n\t\t\t\t\tstyle={ readableContentViewStyle }\n\t\t\t\t\tpointerEvents={ isReadOnly ? 'box-only' : 'auto' }\n\t\t\t\t>\n\t\t\t\t\t{ shouldShowInsertionPointBefore( clientId ) && (\n\t\t\t\t\t\t<BlockInsertionPoint />\n\t\t\t\t\t) }\n\t\t\t\t\t<BlockListBlock\n\t\t\t\t\t\tkey={ clientId }\n\t\t\t\t\t\tshowTitle={ false }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tmarginVertical={ marginVertical }\n\t\t\t\t\t\tmarginHorizontal={ marginHorizontal }\n\t\t\t\t\t\trootClientId={ this.props.rootClientId }\n\t\t\t\t\t\tonCaretVerticalPositionChange={\n\t\t\t\t\t\t\tthis.onCaretVerticalPositionChange\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparentWidth={ this.props.parentWidth }\n\t\t\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\t\t\tcontentStyle={ contentStyle }\n\t\t\t\t\t\tonAddBlock={ onAddBlock }\n\t\t\t\t\t\tonDeleteBlock={ onDeleteBlock }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! this.shouldShowInnerBlockAppender() &&\n\t\t\t\t\t\tshouldShowInsertionPointAfter( clientId ) && (\n\t\t\t\t\t\t\t<BlockInsertionPoint />\n\t\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t</ReadableContentView>\n\t\t);\n\t}\n\n\trenderBlockListFooter() {\n\t\tconst paragraphBlock = createBlock( 'core/paragraph' );\n\t\tconst {\n\t\t\tisReadOnly,\n\t\t\twithFooter = true,\n\t\t\trenderFooterAppender,\n\t\t} = this.props;\n\n\t\tif ( ! isReadOnly && withFooter ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\taccessibilityLabel={ __( 'Add paragraph block' ) }\n\t\t\t\t\t\tonPress={ () => {\n\t\t\t\t\t\t\tthis.addBlockToEndOfPost( paragraphBlock );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<View style={ styles.blockListFooter } />\n\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t</>\n\t\t\t);\n\t\t} else if ( renderFooterAppender ) {\n\t\t\treturn renderFooterAppender();\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { rootClientId, __experimentalMoverDirection } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockOrder,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t\tgetSettings,\n\t\t\tgetBlockHierarchyRootClientId,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst isStackedHorizontally =\n\t\t\t__experimentalMoverDirection === 'horizontal';\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst blockInsertionPointIsVisible = isBlockInsertionPointVisible();\n\t\tconst shouldShowInsertionPointBefore = ( clientId ) => {\n\t\t\treturn (\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tblockInsertionPointIsVisible &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t\t// if list is empty, show the insertion point (via the default appender)\n\t\t\t\t( blockClientIds.length === 0 ||\n\t\t\t\t\t// or if the insertion point is right before the denoted block\n\t\t\t\t\tblockClientIds[ insertionPoint.index ] === clientId )\n\t\t\t);\n\t\t};\n\t\tconst shouldShowInsertionPointAfter = ( clientId ) => {\n\t\t\treturn (\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tblockInsertionPointIsVisible &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t\t// if the insertion point is at the end of the list\n\t\t\t\tblockClientIds.length === insertionPoint.index &&\n\t\t\t\t// and the denoted block is the last one on the list, show the indicator at the end of the block\n\t\t\t\tblockClientIds[ insertionPoint.index - 1 ] === clientId\n\t\t\t);\n\t\t};\n\n\t\tconst isReadOnly = getSettings().readOnly;\n\n\t\tconst rootBlockId = getBlockHierarchyRootClientId(\n\t\t\tselectedBlockClientId\n\t\t);\n\t\tconst hasRootInnerBlocks = !! getBlockCount( rootBlockId );\n\n\t\tconst isFloatingToolbarVisible =\n\t\t\t!! selectedBlockClientId && hasRootInnerBlocks;\n\n\t\treturn {\n\t\t\tblockClientIds,\n\t\t\tblockCount: getBlockCount( rootClientId ),\n\t\t\tisBlockInsertionPointVisible: isBlockInsertionPointVisible(),\n\t\t\tshouldShowInsertionPointBefore,\n\t\t\tshouldShowInsertionPointAfter,\n\t\t\tselectedBlockClientId,\n\t\t\tisReadOnly,\n\t\t\tisRootList: rootClientId === undefined,\n\t\t\tisFloatingToolbarVisible,\n\t\t\tisStackedHorizontally,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { insertBlock, replaceBlock, clearSelectedBlock } = dispatch(\n\t\t\t'core/block-editor'\n\t\t);\n\n\t\treturn {\n\t\t\tclearSelectedBlock,\n\t\t\tinsertBlock,\n\t\t\treplaceBlock,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( BlockList );\n"]}